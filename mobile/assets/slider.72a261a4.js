import{d as e,p as a,g as t,A as l,J as s,q as o,s as n,o as r,f as i,w as u,e as c,h as m,u as v,y as d,Q as h,x as y,i as p,t as b,v as g,c as f,F as w,b as S,U as x,an as k,a4 as _,a3 as C,ao as A,l as B,K as V}from"./index-55845ce0.js";import{a as j}from"./index.f4d2668a.js";import{g as z,t as E}from"./dom.7fe67c3f.js";import{a as T,u as $}from"./common.bcce75e7.js";import{_ as L}from"./_plugin-vue_export-helper.1b428a4d.js";const M=L(e({options:{virtualHost:!0,styleIsolation:"shared"},__name:"slider",props:{rootStyle:[String,Object,Array],rootClass:String,range:Boolean,modelValue:[Number,Array],min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},vertical:Boolean,disabled:Boolean,readonly:Boolean,pieceColor:String,trackColor:String,trackSize:String,thumbColor:String,thumbSize:String,showValue:Boolean,valuePosition:String,valueBackground:String,valueColor:String,showScale:Boolean,scalePosition:String,validateEvent:{type:Boolean,default:!0}},emits:["update:model-value"],setup(e,{emit:L}){const M=e,N=j("slider"),P=T(),X=$(),Y=a((()=>(null==P?void 0:P.disabled)??M.disabled)),I=a((()=>(null==P?void 0:P.readonly)??M.readonly)),q=t(M.modelValue??(M.range?[M.min,M.min]:M.min));l((()=>M.modelValue),(()=>{q.value=M.modelValue??(M.range?[M.min,M.min]:M.min),M.validateEvent&&(null==X||X.onChange())}));const D=s(),F=V();let H,J,K,O=0;const Q=async e=>{if(Y.value||I.value)return;const{clientY:a,clientX:t}="touches"in e?e.touches[0]:e;H=await z(`#${D}`,F);const l=M.vertical?H.height:H.width,s=((M.vertical?a:t)-(M.vertical?H.top:H.left))/l,o=M.max-M.min,n=x(k(M.min+o*s,M.step),M.min,M.max);let r;if(Array.isArray(q.value)){const[e,a]=q.value;Math.abs(n-a)<=Math.abs(n-e)?n!==q.value[1]&&(r=[e,n]):n!==q.value[0]&&(r=[n,a])}else n!==q.value&&(r=n);void 0!==r&&(q.value=r,L("update:model-value",r))};let U={x:0,y:0};const G=async(e,a)=>{if(Y.value||I.value)return;U={x:e.touches[0].clientX,y:e.touches[0].clientY},H=await z(`#${D}`,F);const t=Array.isArray(q.value)?q.value[a]:q.value;O=(t-M.min)/(M.max-M.min),J=q.value,K=q.value},R=(e,a)=>{if(Y.value||I.value)return;if(!H)return;const t=e.touches[0].clientX-U.x,l=e.touches[0].clientY-U.y,s=M.vertical?H.height:H.width,o=(M.vertical?l:t)/s+O,n=M.max-M.min,r=x(k(M.min+n*o,M.step),M.min,M.max);let i;if(Array.isArray(J)){const[e,t]=J;i=1===a?r<e?[r,e]:[e,r]:r>t?[t,r]:[r,t]}else i=r;_(C(i),C(K))||(K=i,q.value=i,L("update:model-value",i))},W=(e,a)=>{const t=A();G(E(e,t.windowTop),a);const l=e=>{e.preventDefault(),R(E(e,t.windowTop),a)},s=()=>{document.removeEventListener("mouseup",s),document.removeEventListener("mousemove",l)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",s)},Z=a((()=>{let e,a;return Array.isArray(q.value)?(e=q.value[0],a=q.value[1]):(e=M.min,a=q.value),[e,a]})),ee=a((()=>{const e=(Z.value[0]-M.min)/(M.max-M.min);return[100*e+"%",100*((Z.value[1]-M.min)/(M.max-M.min)-e)+"%"]})),ae=a((()=>{if(!M.showScale)return[];const e=M.max-M.min,a=M.vertical?"top":"left",t=[{value:M.min,style:{[a]:"0%"},active:M.min===Z.value[0]}];let l=M.min;do{l+=M.step,l>M.max&&(l=M.max),t.push({value:l,style:{[a]:(l-M.min)/e*100+"%"},active:l>=Z.value[0]&&l<=Z.value[1]})}while(l<M.max);return t})),te=a((()=>o(N.b(),N.m("vertical",M.vertical),N.m("disabled",Y.value),N.m("readonly",I.value),N.m("show-scale",M.showScale),N.m(`scale-${M.scalePosition??(M.vertical?"left":"bottom")}`,M.showScale),M.rootClass))),le=a((()=>n(M.rootStyle))),se=a((()=>n({width:M.thumbSize,height:M.thumbSize,backgroundColor:M.thumbColor}))),oe=a((()=>o(N.e("value"),N.em("value",M.valuePosition??(M.vertical?"right":"top"))))),ne=a((()=>n({backgroundColor:M.valueBackground,color:M.valueColor})));return(e,a)=>{const t=B;return r(),i(t,{class:m(v(te)),style:d(v(le)),onClick:Q},{default:u((()=>[c(t,{class:m(v(N).e("track")),id:v(D),style:d(v(n)({width:e.vertical?e.trackSize:null,height:e.vertical?null:e.trackSize,backgroundColor:e.trackColor}))},{default:u((()=>[c(t,{class:m(v(N).e("piece")),style:d(v(n)({[e.vertical?"top":"left"]:v(ee)[0],[e.vertical?"height":"width"]:v(ee)[1],backgroundColor:e.pieceColor}))},{default:u((()=>[e.range?(r(),i(t,{key:0,class:m(v(o)(v(N).e("thumb-container"),v(N).em("thumb-container","start"))),onTouchstart:a[0]||(a[0]=e=>G(e,0)),onTouchmove:a[1]||(a[1]=h((e=>R(e,0)),["stop","prevent"])),onMousedown:a[2]||(a[2]=e=>W(e,0))},{default:u((()=>[y(e.$slots,"start-thumb",{value:v(Z)[0]},(()=>[c(t,{class:m(v(N).e("thumb")),style:d(v(se))},null,8,["class","style"])]),!0),e.showValue?(r(),i(t,{key:0,class:m(v(oe)),style:d(v(ne))},{default:u((()=>[p(b(v(Z)[0]),1)])),_:1},8,["class","style"])):g("",!0)])),_:3},8,["class"])):g("",!0),c(t,{class:m(v(o)(v(N).e("thumb-container"),v(N).em("thumb-container","end"))),onTouchstart:a[3]||(a[3]=e=>G(e,1)),onTouchmove:a[4]||(a[4]=h((e=>R(e,1)),["stop","prevent"])),onMousedown:a[5]||(a[5]=e=>W(e,1))},{default:u((()=>[y(e.$slots,"end-thumb",{value:v(Z)[1]},(()=>[c(t,{class:m(v(N).e("thumb")),style:d(v(se))},null,8,["class","style"])]),!0),e.showValue?(r(),i(t,{key:0,class:m(v(oe)),style:d(v(ne))},{default:u((()=>[p(b(v(Z)[1]),1)])),_:1},8,["class","style"])):g("",!0)])),_:3},8,["class"])])),_:3},8,["class","style"]),e.showScale?(r(!0),f(w,{key:0},S(v(ae),((e,a)=>(r(),i(t,{key:a,class:m(v(o)(v(N).e("scale"),v(N).em("scale","active",e.active))),style:d(v(n)(e.style))},{default:u((()=>[c(t,{class:m(v(N).e("scale-text"))},{default:u((()=>[p(b(e.value),1)])),_:2},1032,["class"])])),_:2},1032,["class","style"])))),128)):g("",!0)])),_:3},8,["class","id","style"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-c036a9b4"]]);export{M as _};

import{d as e,p as a,g as l,A as o,o as s,c as t,e as i,w as u,f as v,v as n,F as d,z as r,a3 as m}from"./index-55845ce0.js";import{p,_ as c}from"./popout-input.5019c607.js";import{_ as b}from"./popout.f26c366d.js";import{p as y,d as V,_ as f,g as h,a as g,b as k,c as _}from"./picker.783ddb63.js";const j=e({options:{virtualHost:!0,styleIsolation:"shared"},__name:"picker-input",props:{...p,...y,visible:Boolean,title:String},emits:["update:visible","update:model-value"],setup(e,{emit:p}){const y=e,j=a((()=>Object.assign({},V,y.optionKeys))),C=l(y.modelValue);o((()=>y.modelValue),(()=>{C.value=y.modelValue}));const U=l(y.modelValue),x=e=>{U.value=e},H=e=>{"enter"!==e||r(C.value)||""===C.value||U.value===C.value||(U.value=C.value)},K=()=>{(r(U.value)||""===U.value)&&(U.value=h(y.columns,j.value)),C.value=U.value,p("update:model-value",U.value),S.value=w()},S=l("");function w(){return r(C.value)||""===C.value?"":function(e,a,l){const o=g(m(l),e||[],a);return k(o,e||[],a).map((e=>_(e,a.label))).join("/")}(y.columns,j.value,C.value)}o(C,(()=>{S.value=w()}),{immediate:!0});const z=()=>{S.value="",C.value=void 0,p("update:model-value",void 0)},A=l(y.visible);o((()=>y.visible),(()=>{A.value=y.visible}));const B=e=>{A.value=e,p("update:visible",e)},E=()=>{A.value=!0,p("update:visible",!0)};return(e,a)=>(s(),t(d,null,[i(c,{modelValue:S.value,"onUpdate:modelValue":a[0]||(a[0]=e=>S.value=e),placeholder:e.placeholder,readonly:e.readonly,disabled:e.disabled,clearable:e.clearable,onClear:z,onClick:E,"validate-event":e.validateEvent},null,8,["modelValue","placeholder","readonly","disabled","clearable","validate-event"]),i(b,{"root-class":e.rootClass,"root-style":e.rootStyle,visible:A.value,"onUpdate:visible":B,title:e.title??e.placeholder,onConfirm:K,onVisibleHook:H},{visible:u((({already:a})=>[a?(s(),v(f,{key:0,"model-value":U.value,"onUpdate:modelValue":x,columns:e.columns,"option-keys":e.optionKeys,"immediate-change":e.immediateChange},null,8,["model-value","columns","option-keys","immediate-change"])):n("",!0)])),_:1},8,["root-class","root-style","visible","title"])],64))}});export{j as _};

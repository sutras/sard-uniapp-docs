import{E as e,d as a,p as t,g as l,A as s,K as o,q as n,s as r,o as i,f as u,w as c,e as m,h as v,u as d,y as h,R as y,x as p,i as g,t as b,v as f,c as w,F as S,b as x,W as k,ao as C,a3 as _,U as A,ap as T,l as B,L as E}from"./index-6f8f5948.js";import{b as V,_ as z}from"./index.09d87181.js";import{g as j,t as L}from"./dom.f92aa117.js";import{a as P,u as $}from"./common.097e1cb5.js";const M=z(a({options:{virtualHost:!0,styleIsolation:"shared"},__name:"slider",props:{rootStyle:[String,Object,Array],rootClass:String,range:Boolean,modelValue:[Number,Array],min:{type:Number,default:e.slider.min},max:{type:Number,default:e.slider.max},step:{type:Number,default:e.slider.step},vertical:Boolean,disabled:Boolean,readonly:Boolean,pieceColor:String,trackColor:String,trackSize:String,thumbColor:String,thumbSize:String,showValue:Boolean,valuePosition:String,valueBackground:String,valueColor:String,showScale:Boolean,scalePosition:String,validateEvent:{type:Boolean,default:e.slider.validateEvent}},emits:["update:model-value","change","drag-start","drag-end"],setup(e,{emit:a}){const z=e,M=V("slider"),N=P(),X=$(),Y=t((()=>(null==N?void 0:N.disabled)??z.disabled)),I=t((()=>(null==N?void 0:N.readonly)??z.readonly)),q=l(z.modelValue??(z.range?[z.min,z.min]:z.min));s((()=>z.modelValue),(()=>{q.value=z.modelValue??(z.range?[z.min,z.min]:z.min),z.validateEvent&&(null==X||X.onChange())}));const D=o(),F=E();let H,K,O,R=0,U=!1;const W=async e=>{if(Y.value||I.value)return;const{clientY:t,clientX:l}="touches"in e?e.touches[0]:e;H=await j(`#${D}`,F);const s=z.vertical?H.height:H.width,o=((z.vertical?t:l)-(z.vertical?H.top:H.left))/s,n=z.max-z.min,r=k(C(z.min+n*o,z.step),z.min,z.max);let i;if(Array.isArray(q.value)){const[e,a]=q.value;Math.abs(r-a)<=Math.abs(r-e)?r!==q.value[1]&&(i=[e,r]):r!==q.value[0]&&(i=[r,a])}else r!==q.value&&(i=r);void 0!==i&&(q.value=i,a("update:model-value",i),a("change",i))};let G={x:0,y:0};const J=async(e,a)=>{if(Y.value||I.value)return;G={x:e.touches[0].clientX,y:e.touches[0].clientY},H=await j(`#${D}`,F);const t=Array.isArray(q.value)?q.value[a]:q.value;R=(t-z.min)/(z.max-z.min),K=q.value,O=q.value},Q=(e,t)=>{if(Y.value||I.value)return;if(U||(U=!0,a("drag-start",e)),!H)return;const l=e.touches[0].clientX-G.x,s=e.touches[0].clientY-G.y,o=z.vertical?H.height:H.width,n=(z.vertical?s:l)/o+R,r=z.max-z.min,i=k(C(z.min+r*n,z.step),z.min,z.max);let u;if(Array.isArray(K)){const[e,a]=K;u=1===t?i<e?[i,e]:[e,i]:i>a?[a,i]:[i,a]}else u=i;_(A(u),A(O))||(O=u,q.value=u,a("update:model-value",u))},Z=e=>{U=!1,Y.value||I.value||(_(A(K),A(q.value))||a("change",q.value),a("drag-end",e))},ee=(e,a)=>{const t=T();J(L(e,t.windowTop),a);const l=e=>{e.preventDefault(),e.stopPropagation(),Q(L(e,t.windowTop),a)},s=()=>{Z(e),document.removeEventListener("mouseup",s),document.removeEventListener("mousemove",l)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",s)},ae=t((()=>{let e,a;return Array.isArray(q.value)?(e=q.value[0],a=q.value[1]):(e=z.min,a=q.value),[e,a]})),te=t((()=>{const e=(ae.value[0]-z.min)/(z.max-z.min);return[100*e+"%",100*((ae.value[1]-z.min)/(z.max-z.min)-e)+"%"]})),le=t((()=>{if(!z.showScale)return[];const e=z.max-z.min,a=z.vertical?"top":"left",t=[{value:z.min,style:{[a]:"0%"},active:z.min===ae.value[0]}];let l=z.min;do{l+=z.step,l>z.max&&(l=z.max),t.push({value:l,style:{[a]:(l-z.min)/e*100+"%"},active:l>=ae.value[0]&&l<=ae.value[1]})}while(l<z.max);return t})),se=t((()=>n(M.b(),M.m("vertical",z.vertical),M.m("disabled",Y.value),M.m("readonly",I.value),M.m("show-scale",z.showScale),M.m(`scale-${z.scalePosition??(z.vertical?"left":"bottom")}`,z.showScale),z.rootClass))),oe=t((()=>r(z.rootStyle))),ne=t((()=>r({width:z.thumbSize,height:z.thumbSize,backgroundColor:z.thumbColor}))),re=t((()=>n(M.e("value"),M.em("value",z.valuePosition??(z.vertical?"right":"top"))))),ie=t((()=>r({backgroundColor:z.valueBackground,color:z.valueColor})));return(e,a)=>{const t=B;return i(),u(t,{class:v(d(se)),style:h(d(oe)),onClick:W},{default:c((()=>[m(t,{class:v(d(M).e("track")),id:d(D),style:h(d(r)({width:e.vertical?e.trackSize:null,height:e.vertical?null:e.trackSize,backgroundColor:e.trackColor}))},{default:c((()=>[m(t,{class:v(d(M).e("piece")),style:h(d(r)({[e.vertical?"top":"left"]:d(te)[0],[e.vertical?"height":"width"]:d(te)[1],backgroundColor:e.pieceColor}))},{default:c((()=>[e.range?(i(),u(t,{key:0,class:v(d(n)(d(M).e("thumb-container"),d(M).em("thumb-container","start"))),onTouchstart:a[0]||(a[0]=e=>J(e,0)),onTouchmove:a[1]||(a[1]=y((e=>Q(e,0)),["stop","prevent"])),onTouchend:a[2]||(a[2]=e=>Z(e)),onTouchcancel:a[3]||(a[3]=e=>Z(e)),onMousedown:a[4]||(a[4]=e=>ee(e,0))},{default:c((()=>[p(e.$slots,"start-thumb",{value:d(ae)[0]},(()=>[m(t,{class:v(d(M).e("thumb")),style:h(d(ne))},null,8,["class","style"])]),!0),e.showValue?(i(),u(t,{key:0,class:v(d(re)),style:h(d(ie))},{default:c((()=>[g(b(d(ae)[0]),1)])),_:1},8,["class","style"])):f("",!0)])),_:3},8,["class"])):f("",!0),m(t,{class:v(d(n)(d(M).e("thumb-container"),d(M).em("thumb-container","end"))),onTouchstart:a[5]||(a[5]=e=>J(e,1)),onTouchmove:a[6]||(a[6]=y((e=>Q(e,1)),["stop","prevent"])),onTouchend:a[7]||(a[7]=e=>Z(e)),onTouchcancel:a[8]||(a[8]=e=>Z(e)),onMousedown:a[9]||(a[9]=e=>ee(e,1))},{default:c((()=>[p(e.$slots,"end-thumb",{value:d(ae)[1]},(()=>[m(t,{class:v(d(M).e("thumb")),style:h(d(ne))},null,8,["class","style"])]),!0),e.showValue?(i(),u(t,{key:0,class:v(d(re)),style:h(d(ie))},{default:c((()=>[g(b(d(ae)[1]),1)])),_:1},8,["class","style"])):f("",!0)])),_:3},8,["class"])])),_:3},8,["class","style"]),e.showScale?(i(!0),w(S,{key:0},x(d(le),((e,a)=>(i(),u(t,{key:a,class:v(d(n)(d(M).e("scale"),d(M).em("scale","active",e.active))),style:h(d(r)(e.style))},{default:c((()=>[m(t,{class:v(d(M).e("scale-text"))},{default:c((()=>[g(b(e.value),1)])),_:2},1032,["class"])])),_:2},1032,["class","style"])))),128)):f("",!0)])),_:3},8,["class","id","style"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-8eafb928"]]);export{M as _};

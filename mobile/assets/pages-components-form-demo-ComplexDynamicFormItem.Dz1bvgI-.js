import{_ as e}from"./picker-input.vue_vue_type_script_setup_true_lang.aIRoVlGW.js";import{d as a,g as l,C as s,A as i,r as t,a as o,o as r,f as n,w as u,e as m,c as d,b as p,F as c,i as f,T as g,I as h,l as _}from"./index-DFwJ2Oj-.js";import{_ as j,a as b}from"./form.D0wWYwqT.js";import{S as v}from"./input.2uLEz9Cx.js";import{a as x}from"./index.BDMDFAO9.js";import{_ as V}from"./button.6NBmS2yV.js";import{_ as k}from"./index.NOUmFN7R.js";import"./popout-input.BJdVGvWw.js";import"./common.BM3Qp-Uy.js";import"./popout.Dm-B4gdJ.js";import"./picker.DHmeMfQj.js";import"./dom.LPfVLj9J.js";const y=a({__name:"ComplexDynamicFormItem",setup(a){const y=[{label:"Beijing",value:"Beijing"},{label:"Shanghai",value:"Shanghai"}],S={Beijing:["Tiananmen","Great Wall"],Shanghai:["Oriental Pearl","The Bund"]},C=l(),w=s({sights:[],area:""});i((()=>w.area),(()=>{w.sights=[]}));const U=()=>{var e;null==(e=C.value)||e.validate().then((()=>{console.log("Received values of form:",g(w)),h("success")})).catch((()=>{console.log("fail")}))};return(a,l)=>{const s=t(o("sar-picker-input"),e),i=t(o("sar-form-item"),j),g=t(o("sar-input"),v),h=t(o("sar-icon"),x),A=t(o("sar-button"),V),B=_,q=t(o("sar-form"),b),I=t(o("doc-page"),k);return r(),n(I,null,{default:u((()=>[m(q,{ref_key:"formRef",ref:C,model:w},{default:u((()=>[m(i,{name:"area",label:"Area",rules:[{required:!0,message:"Missing area"}]},{default:u((()=>[m(s,{modelValue:w.area,"onUpdate:modelValue":l[0]||(l[0]=e=>w.area=e),placeholder:"Area",columns:y},null,8,["modelValue"])])),_:1}),(r(!0),d(c,null,p(w.sights,((e,a)=>(r(),n(i,{key:e.id},{default:u((()=>[m(B,{style:{display:"flex","align-items":"center",gap:"20rpx"}},{default:u((()=>[m(i,{name:["sights",a,"value"],label:"Sight","label-width":"100rpx",rules:{required:!0,message:"Missing sight"},inlaid:""},{default:u((()=>[m(s,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,placeholder:"Sight",disabled:!w.area,columns:(S[w.area]||[]).map((e=>({value:e,label:e})))},null,8,["modelValue","onUpdate:modelValue","disabled","columns"])])),_:2},1032,["name"]),m(i,{name:["sights",a,"price"],label:"Price","label-width":"100rpx",rules:{required:!0,message:"Missing price"},inlaid:""},{default:u((()=>[m(g,{inlaid:"",placeholder:"Price",modelValue:e.price,"onUpdate:modelValue":a=>e.price=a},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["name"]),m(A,{type:"mild",size:"small",onClick:a=>(e=>{const a=w.sights.indexOf(e);-1!==a&&w.sights.splice(a,1)})(e)},{default:u((()=>[m(h,{name:"minus"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128)),m(i,null,{default:u((()=>[m(A,{type:"outline",onClick:l[1]||(l[1]=e=>{w.sights.push({value:"",price:"",id:Date.now()})})},{default:u((()=>[m(h,{name:"plus"}),f(" Add sights ")])),_:1})])),_:1}),m(i,null,{default:u((()=>[m(A,{onClick:U},{default:u((()=>[f("Submit")])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})}}});export{y as default};

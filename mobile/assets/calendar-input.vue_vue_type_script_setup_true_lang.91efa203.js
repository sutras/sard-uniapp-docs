import{E as e,d as a,g as l,A as t,p as o,T as s,o as r,c as i,e as n,w as u,f as d,v as m,u as v,F as p}from"./index-6f8f5948.js";import{p as c,_ as y}from"./popout-input.51e07b6a.js";import{c as f,S as b}from"./calendar.91b79e53.js";import{_ as h}from"./popout.964827c0.js";import{f as w}from"./datetime-picker.vue_vue_type_script_setup_true_lang.493c9109.js";import{u as _}from"./common.097e1cb5.js";const x=a({options:{virtualHost:!0,styleIsolation:"shared"},__name:"calendar-input",props:{...c,...f,visible:Boolean,title:String,showConfirm:{type:Boolean,default:e.calendarInput.showConfirm},validateEvent:{type:Boolean,default:e.calendarInput.validateEvent}},emits:["update:visible","update:model-value"],setup(e,{emit:a}){const c=e,f=_(),x=l(c.modelValue);t((()=>c.modelValue),(()=>{x.value=c.modelValue,c.validateEvent&&(null==f||f.onChange())}));const g=l(c.modelValue);t(x,(()=>{g.value=x.value}));const C=o((()=>{const e=g.value;return!e||Array.isArray(e)&&0===e.length})),V=()=>{x.value=g.value,a("update:model-value",g.value),j.value=S()},D=e=>{g.value=e,c.showConfirm||C.value||(V(),M.value=!1)},j=l(""),k="YYYY-MM-DD",{t:A}=s("calendar");function S(){return!x.value||Array.isArray(x.value)&&0===x.value.length?"":(e=x.value,"single"===(a=c.type)?w(e,k):"range"===a?`${w(e[0],k)} ${A("to")} ${w(e[1],k)}`:"multiple"===a?A("multipleOutlet",{count:e.length}):"");var e,a}t(x,(()=>{j.value=S()}),{immediate:!0});const E=()=>{j.value="",x.value=void 0,a("update:model-value",void 0)},M=l(c.visible);t((()=>c.visible),(()=>{M.value=c.visible}));const Y=e=>{M.value=e,a("update:visible",e)},B=()=>{M.value=!0,a("update:visible",!0)};return(e,a)=>(r(),i(p,null,[n(y,{modelValue:j.value,"onUpdate:modelValue":a[0]||(a[0]=e=>j.value=e),placeholder:e.placeholder,readonly:e.readonly,disabled:e.disabled,clearable:e.clearable,onClear:E,onClick:B},null,8,["modelValue","placeholder","readonly","disabled","clearable"]),n(h,{"root-class":e.rootClass,"root-style":e.rootStyle,visible:M.value,"onUpdate:visible":Y,title:e.title??e.placeholder,"show-confirm":e.showConfirm,"confirm-disabled":v(C),onConfirm:V},{visible:u((({already:a})=>[a?(r(),d(b,{key:0,"model-value":g.value,"onUpdate:modelValue":D,type:e.type,min:e.min,max:e.max,"current-date":e.currentDate,"disabled-date":e.disabledDate,"max-days":e.maxDays,"over-max-days":e.overMaxDays,"week-starts-on":e.weekStartsOn,formatter:e.formatter,"allow-same-day":e.allowSameDay,"several-months":e.severalMonths},null,8,["model-value","type","min","max","current-date","disabled-date","max-days","over-max-days","week-starts-on","formatter","allow-same-day","several-months"])):m("",!0)])),_:1},8,["root-class","root-style","visible","title","show-confirm","confirm-disabled"])],64))}});export{x as _};

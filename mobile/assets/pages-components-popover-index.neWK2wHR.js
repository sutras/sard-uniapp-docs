import{_ as t}from"./index.BI3vtXtd.js";import{N as e,M as o,E as n,d as l,L as i,m as a,p as s,o as r,f as c,w as u,v as d,h as p,x as f,u as m,q as _,z as v,l as h,aq as x,X as b,s as w,e as g,i as y,t as k,G as C,c as S,F as I,b as j,g as H,C as $,D as G,A as z,_ as B,B as F,r as W,a as E,I as R}from"./index-DFwJ2Oj-.js";import{d as D,g as M,f as A,_ as L}from"./index.NOUmFN7R.js";import{_ as T}from"./button.6NBmS2yV.js";import{g as q}from"./dom.LPfVLj9J.js";import{a as O,b as P,_ as U}from"./index.BDMDFAO9.js";import{_ as N,a as V}from"./grid.CMoMrrha.js";import{_ as X,a as J}from"./list.BRtuGdlc.js";import"./common.BM3Qp-Uy.js";function K(t){const n=o();let l,i;function a(){if(i){const t=i;return i=void 0,t()}if(t)return q(t,n)}e((()=>{null==l||l.register({getRect:a})}));return{show:e=>{i=e,(t||i)&&(null==l||l.show())},_inject:function(t){l=t}}}const Q=n.popover,Y=Symbol("popover-context"),Z=l({options:{virtualHost:!0,styleIsolation:"shared"},__name:"popover-reference",props:{rootStyle:{},rootClass:{}},emits:["click"],setup(t,{emit:n}){const l=t,x=n,b=i(),w=o(),g=a(Y),y=()=>q(`#${b}`,w);e((()=>{null==g||g.register({getRect:y})}));const k=t=>{null==g||g.show(),x("click",t)},C=s((()=>_(l.rootClass))),S=s((()=>v(l.rootStyle)));return(t,e)=>{const o=h;return r(),c(o,{class:p(C.value),style:f(S.value),id:m(b),onClick:k},{default:u((()=>[d(t.$slots,"default")])),_:3},8,["class","style","id"])}}}),tt=["top","right","bottom","left"];function et(t){const e=tt.indexOf(t);return tt[e+2]??tt[e-2]}function ot(t){return"top"===t?"height":"width"}const nt=U(l({options:{virtualHost:!0,styleIsolation:"shared"},__name:"menu-item",props:{text:{},disabled:{type:Boolean},icon:{},iconFamily:{},withIcon:{type:Boolean},direction:{}},emits:["click"],setup(t,{emit:e}){const o=t,n=e,l=P("menu"),i=t=>{n("click",t)},a=s((()=>_(l.e("item"),l.em("item","disabled",o.disabled))));return(t,e)=>{const o=h;return r(),c(o,{class:p(a.value),onClick:i},{default:u((()=>[t.icon||t.withIcon&&"vertical"===t.direction?(r(),c(o,{key:0,class:p(m(l).e("icon"))},{default:u((()=>[t.icon?(r(),c(O,{key:0,name:t.icon,family:t.iconFamily},null,8,["name","family"])):w("",!0)])),_:1},8,["class"])):w("",!0),g(o,{class:p(m(l).e("text"))},{default:u((()=>[y(k(t.text),1)])),_:1},8,["class"])])),_:1},8,["class"])}}}),[["__scopeId","data-v-4da179bd"]]),lt=U(l({options:{virtualHost:!0,styleIsolation:"shared"},__name:"menu",props:C({rootStyle:{},rootClass:{},options:{},direction:{},theme:{}},{options:()=>[]}),emits:["select"],setup(t,{emit:e}){const o=t,n=e,l=P("menu"),i=s((()=>o.options.some((t=>!!t.icon)))),a=s((()=>_(l.b(),l.m(o.direction),l.m(o.theme),l.m("with-icon",i.value),o.rootClass))),d=s((()=>v(o.rootStyle)));return(t,e)=>{const o=h;return r(),c(o,{class:p(a.value),style:f(d.value)},{default:u((()=>[(r(!0),S(I,null,j(t.options,((e,o)=>(r(),c(nt,{key:o,text:e.text,icon:e.icon,"icon-family":e.iconFamily,disabled:e.disabled,"with-icon":i.value,direction:t.direction,onClick:t=>(t=>{t.disabled||n("select",t)})(e)},null,8,["text","icon","icon-family","disabled","with-icon","direction","onClick"])))),128))])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-ad7880ef"]]),it=U(l({options:{virtualHost:!0,styleIsolation:"shared"},__name:"popover",props:C({rootStyle:{},rootClass:{},visible:{type:Boolean},options:{},position:{},direction:{},theme:{},refGap:{},viewportGap:{},transparent:{type:Boolean},controller:{},duration:{}},Q),emits:["update:visible","select"],setup(t,{emit:e}){const n=t,l=e,a=P("popover"),y=H(n.visible),k=H(!1),C=o(),j=i(),W=H({top:"0",left:"0"}),E=H({top:"0",left:"0"}),R=async()=>{const[t,e]=await Promise.all([J(),q(`#${j}`,C)]);if(t){const[o,l]=function(t,e,{refGap:o,position:n,viewportGap:l,arrowSize:i}){const a=e.width+o,s=e.height+o,r=x(),c=r.windowWidth,u=r.windowHeight,d={top:t.top-s-l,right:c-t.right-a-l,bottom:u-t.bottom-s-l,left:t.left-a-l};let[p,f]=n.split("-");d[p]<0&&(p=et(p),d[p]<0&&(p=et(p))),f=f||"center";const m=function(t){return["top","bottom"].includes(t)?"left":"top"}(p),_=function(t){return"top"===t?"left":"top"}(m),v=ot(m),h=ot(_),w="top"===m?u:c,g="top"===m?c:u,y={top:0,left:0};y[_]=function(){const n={top:()=>t.top-o-e.height,right:()=>t.right+o,bottom:()=>t.bottom+o,left:()=>t.left-o-e.width}[p]();return b(n,l,g-e[h]-l)}(),y[m]=function(){const o={start:()=>t[m],center:()=>t[m]-(e[v]-t[v])/2,end:()=>t[m]-(e[v]-t[v])}[f]();return b(o,l,w-e[v]-l)}();const k={top:y.top,left:y.left,bottom:y.top+e.height,right:y.left+e.width},C={top:0,left:0};return C[m]=function(){const o=et(m);let n=t[m]-k[m];n<0&&(n=0);const l=Math.min(t[o],k[o])-Math.max(t[m],k[m]);return b(n+l/2,i,e[v]-i)}(),C[_]=function(t,e){return{top:()=>e.height,right:()=>0,bottom:()=>0,left:()=>e.width}[t]()}(p,e),[y,C]}(t,e,{position:n.position,refGap:n.refGap,viewportGap:n.viewportGap,arrowSize:15});W.value={top:`calc(${o.top}px + var(--window-top))`,left:o.left+"px"},E.value={top:l.top+"px",left:l.left+"px"},k.value=!0}},{realVisible:L,transitionClass:T,onTransitionEnd:O}=D($({visible:k,duration:G(n,"duration"),prefix:a.m("")}));z((()=>n.visible),(()=>{y.value=n.visible})),z(y,(()=>{y.value?B((()=>{R()})):k.value=!1}));const U=()=>{y.value=!1,l("update:visible",!1)},N=t=>{y.value=!1,l("select",t),l("update:visible",!1)};let V;const X={show(){y.value=!0,l("update:visible",!0)},register(t){V=t}};F(Y,X),z((()=>n.controller),(()=>{n.controller&&n.controller._inject(X)}),{immediate:!0});const J=()=>{if(V)return V.getRect()},[K,Q]=M();z(y,(()=>{y.value&&Q()}));const Z=s((()=>_(a.b(),a.m(n.theme),T.value,n.rootClass))),tt=s((()=>v({zIndex:K.value,transformOrigin:`${E.value.left} ${E.value.top}`,opacity:L.value?1:0,animationDuration:n.duration+"ms"},W.value,n.rootStyle)));return(t,e)=>{const o=h;return r(),S(I,null,[d(t.$slots,"default",{},void 0,!0),g(A,{visible:y.value,"z-index":m(K),transparent:t.transparent,onClick:U},null,8,["visible","z-index","transparent"]),y.value||m(L)?(r(),c(o,{key:0,class:p(Z.value),style:f(tt.value),onAnimationend:m(O)},{default:u((()=>[g(o,{class:p(m(a).e("content")),id:m(j)},{default:u((()=>[d(t.$slots,"content",{},(()=>[g(lt,{options:t.options,direction:t.direction,theme:t.theme,onSelect:N},null,8,["options","direction","theme"])]),!0)])),_:3},8,["class","id"]),g(o,{class:p(m(a).e("arrow")),style:f(m(v)(E.value))},null,8,["class","style"])])),_:3},8,["class","style","onAnimationend"])):w("",!0)],64)}}}),[["__scopeId","data-v-ad73c972"]]),at=l({__name:"Basic",setup(t){const e=[{text:"选项1"},{text:"选项2"},{text:"选项3"}],o=t=>{R(t.text)};return(t,n)=>{const l=W(E("sar-button"),T),i=W(E("sar-popover-reference"),Z),a=W(E("sar-popover"),it);return r(),c(a,{options:e,onSelect:o},{default:u((()=>[g(i,null,{default:u((()=>[g(l,null,{default:u((()=>[y("显示气泡弹出框")])),_:1})])),_:1})])),_:1})}}}),st=l({__name:"Dark",setup(t){const e=[{text:"选项1"},{text:"选项2"},{text:"选项3"}],o=t=>{R(t.text)};return(t,n)=>{const l=W(E("sar-button"),T),i=W(E("sar-popover-reference"),Z),a=W(E("sar-popover"),it);return r(),c(a,{theme:"dark",options:e,onSelect:o},{default:u((()=>[g(i,null,{default:u((()=>[g(l,null,{default:u((()=>[y("显示气泡弹出框")])),_:1})])),_:1})])),_:1})}}}),rt=l({__name:"Icon",setup(t){const e=[{text:"选项1",icon:"upc-scan",iconFamily:"demo-icons"},{text:"选项2",icon:"camera",iconFamily:"demo-icons"},{text:"选项3"}],o=t=>{R(t.text)};return(t,n)=>{const l=W(E("sar-button"),T),i=W(E("sar-popover-reference"),Z),a=W(E("sar-popover"),it);return r(),c(a,{theme:"dark",options:e,onSelect:o},{default:u((()=>[g(i,null,{default:u((()=>[g(l,null,{default:u((()=>[y("显示气泡弹出框")])),_:1})])),_:1})])),_:1})}}}),ct=l({__name:"Disabled",setup(t){const e=[{text:"选项1",disabled:!0},{text:"选项2",disabled:!0},{text:"选项3"}],o=t=>{R(t.text)};return(t,n)=>{const l=W(E("sar-button"),T),i=W(E("sar-popover-reference"),Z),a=W(E("sar-popover"),it);return r(),c(a,{options:e,onSelect:o},{default:u((()=>[g(i,null,{default:u((()=>[g(l,null,{default:u((()=>[y("显示气泡弹出框")])),_:1})])),_:1})])),_:1})}}}),ut=l({__name:"Horizontal",setup(t){const e=[{text:"选项1",icon:"upc-scan",iconFamily:"demo-icons"},{text:"选项2"},{text:"选项3"}],o=t=>{R(t.text)};return(t,n)=>{const l=W(E("sar-button"),T),i=W(E("sar-popover-reference"),Z),a=W(E("sar-popover"),it);return r(),c(a,{direction:"horizontal",options:e,onSelect:o},{default:u((()=>[g(i,null,{default:u((()=>[g(l,null,{default:u((()=>[y("显示气泡弹出框")])),_:1})])),_:1})])),_:1})}}}),dt=l({__name:"Content",setup(t){const e=H(!1);return(t,o)=>{const n=W(E("sar-button"),T),l=W(E("sar-popover-reference"),Z),i=W(E("sar-grid-item"),N),a=W(E("sar-grid"),V),s=W(E("sar-popover"),it);return r(),c(s,{visible:e.value,"onUpdate:visible":o[0]||(o[0]=t=>e.value=t)},{content:u((()=>[g(a,{clickable:"","root-style":"width: 560rpx"},{default:u((()=>[(r(),S(I,null,j(8,(t=>g(i,{key:t,text:`选项${t}`,icon:"image",onClick:o=>(t=>{R(`选项${t}`),e.value=!1})(t)},null,8,["text","onClick"]))),64))])),_:1})])),default:u((()=>[g(l,null,{default:u((()=>[g(n,null,{default:u((()=>[y("显示气泡弹出框")])),_:1})])),_:1})])),_:1},8,["visible"])}}}),pt=U(l({__name:"CustomReference",setup(t){const e=K("#refId"),o=[{text:"选项1"},{text:"选项2"},{text:"选项3"}],n=t=>{R(t.text)},l=()=>{e.show()};return(t,i)=>{const a=W(E("sar-popover"),it),s=h;return r(),S(I,null,[g(a,{options:o,onSelect:n,controller:m(e),position:"right"},null,8,["controller"]),g(s,{onClick:l,class:"popover-box",id:"refId"},{default:u((()=>[y("box")])),_:1})],64)}}}),[["__scopeId","data-v-3e51158c"]]),ft=U(l({__name:"Position",setup(t){const e=H("bottom"),o=H(!1),n=[{text:"选项1"},{text:"选项2"},{text:"选项3"}],l=t=>{e.value=t,o.value=!0},i=t=>{R(t.text)};return(t,a)=>{const s=W(E("sar-grid-item"),N),c=W(E("sar-grid"),V),d=h,p=W(E("sar-popover-reference"),Z),f=W(E("sar-popover"),it);return r(),S(I,null,[g(d,{style:{margin:"0 120rpx"}},{default:u((()=>[g(c,{columns:3,clickable:""},{default:u((()=>[g(s,{onClick:a[0]||(a[0]=t=>l("top-start"))},{default:u((()=>[y("TS")])),_:1}),g(s,{onClick:a[1]||(a[1]=t=>l("top"))},{default:u((()=>[y("top")])),_:1}),g(s,{onClick:a[2]||(a[2]=t=>l("top-end"))},{default:u((()=>[y("TE")])),_:1})])),_:1})])),_:1}),g(d,{style:{display:"flex","flex-direction":"row","justify-content":"space-between"}},{default:u((()=>[g(c,{columns:1,clickable:"","root-style":"width: 120rpx"},{default:u((()=>[g(s,{onClick:a[3]||(a[3]=t=>l("left-start"))},{default:u((()=>[y("LS")])),_:1}),g(s,{onClick:a[4]||(a[4]=t=>l("left"))},{default:u((()=>[y("left")])),_:1}),g(s,{onClick:a[5]||(a[5]=t=>l("left-end"))},{default:u((()=>[y("LE")])),_:1})])),_:1}),g(f,{options:n,visible:o.value,"onUpdate:visible":a[6]||(a[6]=t=>o.value=t),position:e.value,onSelect:i},{default:u((()=>[g(p,{"root-style":{display:"flex",justifyContent:"center",alignItems:"center",width:"200rpx",height:"200rpx",margin:"auto",background:"var(--sar-orange)"}},{default:u((()=>[y(" box ")])),_:1},8,["root-style"])])),_:1},8,["visible","position"]),g(c,{columns:1,clickable:"","root-style":"width: 120rpx"},{default:u((()=>[g(s,{onClick:a[7]||(a[7]=t=>l("right-start"))},{default:u((()=>[y("RS")])),_:1}),g(s,{onClick:a[8]||(a[8]=t=>l("right"))},{default:u((()=>[y("right")])),_:1}),g(s,{onClick:a[9]||(a[9]=t=>l("right-end"))},{default:u((()=>[y("RE")])),_:1})])),_:1})])),_:1}),g(d,{style:{margin:"0 120rpx"}},{default:u((()=>[g(c,{columns:3,clickable:""},{default:u((()=>[g(s,{onClick:a[10]||(a[10]=t=>l("bottom-start"))},{default:u((()=>[y("BS")])),_:1}),g(s,{onClick:a[11]||(a[11]=t=>l("bottom"))},{default:u((()=>[y("bottom")])),_:1}),g(s,{onClick:a[12]||(a[12]=t=>l("bottom-end"))},{default:u((()=>[y("BE")])),_:1})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-aaa78706"]]),mt=l({__name:"Manual",setup(t){const e=H("bottom"),o=K(),n=()=>{e.value="bottom",o.show((()=>{const t=x();return{width:t.windowWidth,height:10,left:0,right:t.windowWidth,top:t.windowHeight-10,bottom:t.windowHeight}}))},l=()=>{e.value="bottom-end",o.show((()=>{const t=x();return{width:10,height:10,left:t.windowWidth-10,right:t.windowWidth,top:t.windowHeight-10,bottom:t.windowHeight}}))},i=()=>{e.value="top",o.show((()=>{const t=x();return{width:t.windowWidth,height:10,left:0,right:t.windowWidth,top:0,bottom:10}}))},a=[{text:"选项1"},{text:"选项2"},{text:"选项3"}],s=t=>{R(t.text)};return(t,c)=>{const d=W(E("sar-popover"),it),p=W(E("sar-list-item"),X),f=W(E("sar-list"),J);return r(),S(I,null,[g(d,{options:a,onSelect:s,position:e.value,controller:m(o)},null,8,["position","controller"]),g(f,{card:""},{default:u((()=>[g(p,{arrow:"",hover:"",title:"屏幕中下",onClick:n}),g(p,{arrow:"",hover:"",title:"屏幕右下",onClick:l}),g(p,{arrow:"",hover:"",title:"屏幕中上",onClick:i})])),_:1})],64)}}}),_t=U(l({__name:"index",setup:e=>(e,o)=>{const n=W(E("doc-demo"),t),l=W(E("doc-page"),L);return r(),c(l,null,{default:u((()=>[g(n,{title:"基础使用"},{default:u((()=>[g(at)])),_:1}),g(n,{title:"暗黑模式"},{default:u((()=>[g(st)])),_:1}),g(n,{title:"展示图标"},{default:u((()=>[g(rt)])),_:1}),g(n,{title:"禁用选项"},{default:u((()=>[g(ct)])),_:1}),g(n,{title:"水平排列"},{default:u((()=>[g(ut)])),_:1}),g(n,{title:"自定义内容"},{default:u((()=>[g(dt)])),_:1}),g(n,{title:"弹出位置"},{default:u((()=>[g(ft)])),_:1}),g(n,{title:"自定义reference"},{default:u((()=>[g(pt)])),_:1}),g(n,{title:"手动定义位置"},{default:u((()=>[g(mt)])),_:1})])),_:1})}}),[["__scopeId","data-v-1c33c2c5"]]);export{_t as default};

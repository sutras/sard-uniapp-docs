import{_ as e}from"./index.DbhGrFWx.js";import{d as s,m as a,L as t,ay as n,p as o,o as r,f as l,w as c,v as u,i,t as v,h as d,x as p,u as m,q as h,z as f,l as _,M as x,g as y,C as g,E as T,c as w,F as b,b as j,e as I,s as C,T as S,ar as k,Y as E,A as L,y as $,$ as H,N as A,B,X as G,r as M,a as Y}from"./index-B7LoF5HM.js";import{d as z,e as D,_ as F}from"./index.XihPCky1.js";import{b as N,_ as O}from"./index.BtT18Zob.js";import{g as P,t as Q,m as R}from"./dom.BNMKb9YT.js";import{_ as X,a as q}from"./list.xpGRs1dN.js";import{_ as J}from"./button.B4-Gq_Gx.js";import"./common.nGc6LDJR.js";const V=Symbol("indexes-context"),Z=O(s({options:{virtualHost:!0,styleIsolation:"shared"},__name:"indexes-anchor",props:{rootStyle:{},rootClass:{},name:{}},setup(e){const s=e,y=N("indexes"),g=a(V);if(!g)throw new Error("IndexesAnchor must be included in Indexes.");const T=t(),w=x(),b=()=>P(`#${T}`,w);n((()=>{g.register(s.name,{getRect:b,id:T})}));const j=o((()=>h(y.e("anchor"),s.rootClass))),I=o((()=>f(s.rootStyle)));return(e,s)=>{const a=_;return r(),l(a,{class:d(j.value),style:p(I.value),id:m(T)},{default:c((()=>[u(e.$slots,"default",{},(()=>[i(v(e.name),1)]),!0)])),_:3},8,["class","style","id"])}}}),[["__scopeId","data-v-0beec10c"]]),K=O(s({options:{virtualHost:!0,styleIsolation:"shared"},__name:"indexes-nav",props:{anchors:{},current:{}},emits:["select"],setup(e,{emit:s}){const a=e,n=s,u=N("indexes"),L=x(),$=t(),H=y(),A=y(!1);let B=null,G=!1;const{realVisible:M,transitionClass:Y,onTransitionEnd:D}=z(g({visible:A,duration:T.indexes.hintDuration,prefix:u.em("hint","")})),F=o((()=>{let e=void 0!==a.current?a.anchors.indexOf(a.current):-1;return e<0&&(e=0),20*e+10+"px"})),O=e=>{if(!H.value)return;const s=e.clientY-H.value.top,t=E(Math.floor(s/20),0,a.anchors.length-1);t!==B&&(B=t,n("select",a.anchors[t]))},R=async e=>{A.value=!0,await(async()=>{H.value=await P(`#${$}`,L)})(),G||O(e.touches[0])},X=e=>{G=!0,H.value&&O(e.touches[0])},q=()=>{A.value=!1,G=!1,H.value=void 0,B=null},J=e=>{const s=k();R(Q(e,s.windowTop));const a=e=>{e.preventDefault(),X(Q(e,s.windowTop))},t=()=>{q(),document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",a)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",t)},V=o((()=>h(u.e("nav")))),Z=o((()=>f({"--sar-indexes-nav-item-size":"20px"})));return(e,s)=>{const a=_;return r(),l(a,{class:d(V.value),style:p(Z.value),id:m($),onTouchstart:R,onTouchmove:S(X,["stop","prevent"]),onTouchend:q,onTouchcancel:q,onMousedown:J},{default:c((()=>[(r(!0),w(b,null,j(e.anchors,((s,t)=>(r(),l(a,{key:t,class:d(m(h)(m(u).e("nav-item"),m(u).em("nav-item","active",s===e.current)))},{default:c((()=>[i(v(s),1)])),_:2},1032,["class"])))),128)),m(M)?(r(),l(a,{key:0,class:d(m(h)(m(u).e("hint"),m(Y))),style:p(m(f)({top:F.value})),onTransitionend:m(D)},{default:c((()=>[I(a,{class:d(m(u).e("hint-text"))},{default:c((()=>[i(v(e.current),1)])),_:1},8,["class"])])),_:1},8,["class","style","onTransitionend"])):C("",!0)])),_:1},8,["class","style","id"])}}}),[["__scopeId","data-v-ea47e77a"]]),U=O(s({options:{virtualHost:!0,styleIsolation:"shared"},__name:"indexes",props:{rootStyle:{},rootClass:{},current:{}},emits:["change"],setup(e,{expose:s,emit:a}){const n=e,i=a,v=N("indexes"),g=y(n.current);L((()=>n.current),(()=>{!$(n.current)&&F.value.includes(n.current)&&(g.value=n.current,E(n.current))}));const T=x(),w=t(),b=y(),j=y(0),C=y(0);let S=!1;const[k]=D((()=>{S=!1})),E=e=>{if(!b.value)return;S=!0,k(150);const s=Y.value.find((s=>s[0]===e));if(s){const e=s[1].top-b.value.top;j.value=void 0,H((()=>{j.value=e}))}};s({scrollTo:E});const M=e=>{C.value=e.detail.scrollTop,!S&&b.value&&R(Y.value.map((e=>e[1])),(e=>{const s=Y.value[e][0];s!==g.value&&(g.value=s,i("change",s))}),{offset:b.value.top+C.value})};A((()=>{P(`#${w}`,T).then((e=>{b.value=e}))}));const Y=y([]),z=y({});B(V,{register(e,s){z.value[e]=s},unregister(e){delete z.value[e]}});A((()=>{H((()=>{(async()=>(await Promise.all(Object.keys(z.value).map((e=>{const{getRect:s}=z.value[e];return new Promise((a=>{s().then((s=>{a([e,s])}))}))})))).sort(((e,s)=>e[1].top-s[1].top)))().then((e=>{Y.value=e,$(n.current)||E(n.current)}))}))}));const F=o((()=>Y.value.map((e=>e[0])))),O=e=>{g.value=e,E(e),i("change",e)},Q=o((()=>h(v.b(),n.rootClass))),X=o((()=>f(n.rootStyle)));return(e,s)=>{const a=G,t=_;return r(),l(t,{class:d(Q.value),style:p(X.value)},{default:c((()=>[I(a,{class:d(m(v).e("scroll-view")),id:m(w),"scroll-y":"","scroll-top":j.value,onScroll:M},{default:c((()=>[u(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","id","scroll-top"]),I(K,{anchors:F.value,current:g.value,onSelect:O},null,8,["anchors","current"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-1a9e47c7"]]),W=s({__name:"Basic",setup(e){const s=[{anchor:"A",provinces:["安徽省","澳门特别行政区"]},{anchor:"B",provinces:["北京市"]},{anchor:"C",provinces:["重庆市"]},{anchor:"F",provinces:["福建省"]},{anchor:"G",provinces:["甘肃省","广东省","广西壮族自治区","贵州省"]},{anchor:"H",provinces:["海南省","河北省","河南省","黑龙江省","湖北省","湖南省"]},{anchor:"J",provinces:["吉林省","江苏省","江西省"]},{anchor:"L",provinces:["辽宁省"]},{anchor:"N",provinces:["内蒙古自治区","宁夏回族自治区"]},{anchor:"Q",provinces:["青海省"]},{anchor:"S",provinces:["山东省","山西省","陕西省","上海市","四川省"]},{anchor:"T",provinces:["台湾省","天津市"]},{anchor:"X",provinces:["西藏自治区","香港特别行政区","新疆维吾尔自治区"]},{anchor:"Y",provinces:["云南省"]},{anchor:"Z",provinces:["浙江省"]}],a=y("Q"),t=()=>{a.value=void 0,H((()=>{a.value="G"}))};return(e,n)=>{const o=M(Y("sar-indexes-anchor"),Z),u=M(Y("sar-list-item"),X),v=M(Y("sar-list"),q),d=_,p=M(Y("sar-indexes"),U),m=M(Y("sar-button"),J);return r(),w(b,null,[I(p,{current:a.value,"root-style":"height: 640rpx"},{default:c((()=>[(r(),w(b,null,j(s,((e,s)=>I(d,{key:s},{default:c((()=>[I(o,{name:e.anchor},null,8,["name"]),I(v,null,{default:c((()=>[(r(!0),w(b,null,j(e.provinces,((e,s)=>(r(),l(u,{key:s,title:e},null,8,["title"])))),128))])),_:2},1024)])),_:2},1024))),64))])),_:1},8,["current"]),I(m,{onClick:t,"root-style":"margin: 100rpx 40rpx 0"},{default:c((()=>[i(" scrollTo G ")])),_:1})],64)}}}),ee=O(s({__name:"index",setup:s=>(s,a)=>{const t=M(Y("doc-demo"),e),n=M(Y("doc-page"),F);return r(),l(n,null,{default:c((()=>[I(t,{title:"基础使用",full:""},{default:c((()=>[I(W)])),_:1})])),_:1})}}),[["__scopeId","data-v-aaacb0fc"]]);export{ee as default};

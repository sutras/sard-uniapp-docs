import{E as e,d as o,T as a,g as l,A as s,p as t,q as i,s as n,o as r,f as c,w as u,e as d,h as p,u as f,y as m,R as v,x as y,i as b,t as h,v as C,l as _,k,G as g}from"./index-aa8abc65.js";import{a as w,b as x,_ as S}from"./index.776be883.js";import{b as B,S as T}from"./index.5a4c2473.js";import{_ as $}from"./button.21fa86db.js";const j=S(o({options:{virtualHost:!0,styleIsolation:"shared"},__name:"popout",props:{rootStyle:[String,Object,Array],rootClass:String,visible:Boolean,duration:{type:Number,default:e.popout.duration},title:String,type:{type:String,default:e.popout.type},showCancel:Boolean,cancelText:String,showConfirm:{type:Boolean,default:e.popout.showConfirm},confirmText:String,confirmDisabled:Boolean,showClose:{type:Boolean,default:e.popout.showClose},showFooter:{type:Boolean,default:e.popout.showFooter},overlayClosable:{type:Boolean,default:e.popout.overlayClosable},beforeClose:Function},emits:["update:visible","close","cancel","confirm","visible-hook"],setup(e,{emit:o}){const S=e,j=x("popout"),{t:F}=a("popout"),A=l(S.visible);s((()=>S.visible),(()=>{A.value=S.visible}));const D=l(S.visible);s(A,(()=>{!D.value&&A.value&&(D.value=!0)}));const E=l(S.visible),H=()=>{E.value=!0},I=()=>{E.value=!1},O=B(),q=e=>{o("visible-hook",e),O(e)},z=l({cancel:!1,confirm:!1,close:!1}),G=e=>{if(o(e),"function"==typeof S.beforeClose){const a=S.beforeClose(e);if(a instanceof Promise)return z.value[e]=!0,a.then((()=>{A.value=!1,o("update:visible",!1)})).catch(g).finally((()=>{z.value[e]=!1}));if(!1===a)return}A.value=!1,o("update:visible",!1)},L=()=>{S.overlayClosable&&G("close")},N=()=>{G("close")},P=()=>{G("confirm")},R=()=>{G("cancel")},V=t((()=>i(j.b(),S.rootClass))),J=t((()=>n(S.rootStyle)));return(e,o)=>{const a=_,l=k;return r(),c(T,{effect:"slide-bottom",visible:e.visible,duration:e.duration,onOverlayClick:L,onBeforeEnter:H,onAfterLeave:I,onVisibleHook:q},{default:u((()=>[d(a,{class:p(f(V)),style:m(f(J)),onTransitionend:o[0]||(o[0]=v((()=>{}),["stop"]))},{default:u((()=>[d(a,{class:p(f(i)(f(j).e("header"),f(j).em("header",S.type)))},{default:u((()=>["compact"===e.type?(r(),c(a,{key:0,class:p(f(j).e("button-wrap"))},{default:u((()=>[d($,{type:"pale-text",theme:"neutral","root-class":f(i)(f(j).e("header-cancel")),loading:z.value.cancel,onClick:R},{default:u((()=>[y(e.$slots,"cancel",{},(()=>[b(h(e.cancelText||f(F)("cancel")),1)]),!0)])),_:3},8,["root-class","loading"])])),_:3},8,["class"])):C("",!0),d(a,{class:p(f(j).e("title"))},{default:u((()=>[y(e.$slots,"title",{},(()=>[d(l,{class:p(f(j).e("title-text"))},{default:u((()=>[b(h(e.title),1)])),_:1},8,["class"])]),!0)])),_:3},8,["class"]),"compact"===e.type?(r(),c(a,{key:1,class:p(f(j).e("button-wrap"))},{default:u((()=>[d($,{type:"pale-text",theme:"primary","root-class":f(i)(f(j).e("header-confirm")),loading:z.value.confirm,disabled:e.confirmDisabled,onClick:P},{default:u((()=>[y(e.$slots,"confirm",{},(()=>[b(h(e.confirmText||f(F)("confirm")),1)]),!0)])),_:3},8,["root-class","loading","disabled"])])),_:3},8,["class"])):C("",!0),"loose"===e.type&&e.showClose?(r(),c(a,{key:2,class:p(f(j).e("close")),onClick:N},{default:u((()=>[d($,{type:"pale-text",theme:"neutral",size:"large"},{default:u((()=>[d(w,{name:"close"})])),_:1})])),_:1},8,["class"])):C("",!0)])),_:3},8,["class"]),y(e.$slots,"default",{},void 0,!0),y(e.$slots,"visible",{whole:E.value,already:D.value},void 0,!0),e.showFooter&&"loose"===e.type?(r(),c(a,{key:0,class:p(f(j).e("footer"))},{default:u((()=>[e.showCancel?(r(),c($,{key:0,type:"pale",theme:"primary",round:"",loading:z.value.cancel,onClick:R},{default:u((()=>[y(e.$slots,"cancel",{},(()=>[b(h(e.cancelText||f(F)("cancel")),1)]),!0)])),_:3},8,["loading"])):C("",!0),e.showConfirm?(r(),c($,{key:1,type:"default",theme:"primary",round:"",loading:z.value.confirm,disabled:e.confirmDisabled,onClick:P},{default:u((()=>[y(e.$slots,"confirm",{},(()=>[b(h(e.confirmText||f(F)("confirm")),1)]),!0)])),_:3},8,["loading","disabled"])):C("",!0)])),_:3},8,["class"])):C("",!0)])),_:3},8,["class","style"])])),_:3},8,["visible","duration"])}}}),[["__scopeId","data-v-93a7fe29"]]);export{j as _};

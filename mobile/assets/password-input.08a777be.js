import{d as e,p as a,g as l,A as s,q as t,s as o,o as n,f as u,w as d,c as r,F as i,b as p,u as c,h as v,i as m,t as y,v as g,e as f,y as b,l as h,a9 as x}from"./index-9377a170.js";import{a as _}from"./index.fad96fb0.js";import{a as B,u as S}from"./common.802edc1c.js";import{_ as k}from"./_plugin-vue_export-helper.1b428a4d.js";const j=k(e({options:{virtualHost:!0,styleIsolation:"shared"},__name:"password-input",props:{rootStyle:[String,Object,Array],rootClass:String,modelValue:String,length:{type:Number,default:6},type:{type:String,default:"border"},gap:[String,Number],plainText:Boolean,focused:Boolean,customKeyboard:Boolean,disabled:Boolean,readonly:Boolean,validateEvent:{type:Boolean,default:!0}},emits:["update:model-value","updat:focused"],setup(e,{emit:k}){const j=e,w=_("password-input"),I=B(),V=S(),A=a((()=>(null==I?void 0:I.disabled)??j.disabled)),C=a((()=>(null==I?void 0:I.readonly)??j.readonly)),E=l(j.modelValue??"");s((()=>j.modelValue),(()=>{E.value=j.modelValue??"",j.validateEvent&&(null==V||V.onChange())}));const F=e=>{const a=e.detail.value;return E.value=a,k("update:model-value",a),a},K=l(j.focused);s((()=>j.focused),(()=>{K.value=j.focused}));const N=()=>{K.value=!0,k("updat:focused",!0)},T=()=>{K.value=!1,k("updat:focused",!1),j.validateEvent&&(null==V||V.onBlur())},q=a((()=>{const e=E.value.length;return Array(j.length).fill(0).map(((a,l)=>({index:l,active:K.value&&(l===e||l===e-1&&l===j.length-1)})))})),H=a((()=>0===j.gap||"string"==typeof j.gap&&0===parseInt(j.gap))),O=a((()=>t(w.b(),w.m("readonly",C.value),w.m("disabled",A.value),w.m(j.type,!H.value),w.m(`tight-${j.type}`,H.value),j.rootClass))),$=a((()=>o({gap:j.gap},j.rootStyle)));return(e,a)=>{const l=h,s=x;return n(),u(l,{class:v(c(O)),style:b(c($))},{default:d((()=>[(n(!0),r(i,null,p(c(q),(a=>(n(),u(l,{key:a.index,class:v(c(t)(c(w).e("item"),c(w).em("item","active",a.active)))},{default:d((()=>[a.index<E.value.length?(n(),r(i,{key:0},[e.plainText?(n(),u(l,{key:0,class:v(c(w).e("plaintext"))},{default:d((()=>[m(y(E.value[a.index]),1)])),_:2},1032,["class"])):(n(),u(l,{key:1,class:v(c(w).e("ciphertext"))},null,8,["class"]))],64)):g("",!0),K.value&&a.index===E.value.length?(n(),u(l,{key:1,class:v(c(w).e("cursor"))},null,8,["class"])):g("",!0)])),_:2},1032,["class"])))),128)),e.customKeyboard?g("",!0):(n(),u(l,{key:0,class:v(c(w).e("input-wrapper"))},{default:d((()=>[f(s,{type:"number",class:v(c(w).e("input")),disabled:c(A)||c(C),value:E.value,maxlength:e.length,onInput:F,onFocus:N,onBlur:T},null,8,["class","disabled","value","maxlength"])])),_:1},8,["class"]))])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-bd8d4aa5"]]);export{j as _};

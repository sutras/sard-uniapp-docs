import{d as e,T as l,p as s,g as a,A as t,q as o,s as n,o as u,f as r,w as i,e as c,u as d,x as p,h as v,y as m,c as f,F as b,b as y,i as h,t as _,l as g,V as x}from"./index-aa8abc65.js";import{a as A,b as S,_ as V}from"./index.776be883.js";import{_ as j}from"./tabs.91f39e71.js";import{a as k}from"./index.5a4c2473.js";const w={rootStyle:[String,Object,Array],rootClass:String,modelValue:[String,Number],options:{type:Array,default:()=>[]},fieldKeys:Object,hintText:String,labelRender:Function},C={label:"label",value:"value",disabled:"disabled",children:"children"};function T(e,l,s){for(const a of e){if(a[s.value]===l)return[a];if(Array.isArray(a[s.children])){const e=T(a[s.children],l,s);if(e)return[a,...e]}}}const I=V(e({options:{virtualHost:!0,styleIsolation:"shared"},__name:"cascader",props:w,emits:["update:model-value","select"],setup(e,{emit:V}){const w=e,I=S("cascader"),{t:O}=l("cascader"),R=()=>{let e;if(void 0===q)e=[{options:w.options||[],selected:null}];else{const l=T(w.options||[],q,N.value);if(l){let s=w.options;e=l.map((e=>{const l={options:s,selected:e};return s=e.children,l})),s&&e.push({options:s,selected:null})}}e&&(U.value=e,D.value=e.length-1,H.value||setTimeout((()=>{H.value=!0}),30))},F=(e,l)=>{if(e.disabled)return;let s=U.value.slice();s[l].selected=e;if(l<s.length-1&&(s=s.slice(0,l+1)),(e=>!Array.isArray(e[N.value.children]))(e)){D.value=l;const a=e[N.value.value];$.value=a,V("update:model-value",a,s.map((e=>e.selected)))}else{const l={options:e[N.value.children],selected:null};s.push(l),D.value=s.length-1}q=e[N.value.value],U.value=s,V("select",e,l)},K=s((()=>w.hintText||O("pleaseSelect"))),N=s((()=>Object.assign({},C,w.fieldKeys))),$=a(w.modelValue);let q=$.value;const D=a(0),H=a(!1),U=a([]),X=s((()=>U.value.map((e=>{const{selected:l}=e;return{title:l?l[N.value.label]:K.value}}))));t((()=>w.modelValue),(()=>{$.value=w.modelValue,void 0!==w.modelValue&&U.value.some((e=>{var l;return(null==(l=e.selected)?void 0:l[N.value.value])===w.modelValue}))||(q=w.modelValue,R())})),t((()=>w.options),(()=>{R()}),{immediate:!0});const z=s((()=>o(I.b(),w.rootClass))),B=s((()=>n(w.rootStyle)));return(e,l)=>{const s=g,a=x;return u(),r(s,{class:v(d(z)),style:m(d(B))},{default:i((()=>[c(j,{scrollable:"",current:D.value,"onUpdate:current":l[0]||(l[0]=e=>D.value=e),list:d(X)},null,8,["current","list"]),p(e.$slots,"top",{tabIndex:D.value},void 0,!0),c(s,{class:v(d(I).e("container"))},{default:i((()=>[c(s,{class:v(d(I).e("wrapper")),style:m(d(n)({transform:`translateX(${100*-Number(D.value)}%)`,transitionDuration:H.value?null:"0s"}))},{default:i((()=>[(u(!0),f(b,null,y(U.value,((l,t)=>(u(),r(s,{key:t,class:v(d(I).e("pane"))},{default:i((()=>[c(s,{class:v(d(I).e("options"))},{default:i((()=>[c(a,{"scroll-y":"",class:v(d(I).e("scroll"))},{default:i((()=>[(u(!0),f(b,null,y(l.options,((a,n)=>(u(),r(s,{key:n,class:v(d(o)(d(I).e("option"),d(I).em("option","selected",l.selected&&l.selected[d(N).value]===a[d(N).value]),d(I).em("option","disabled",a[d(N).disabled]))),onClick:e=>F(a,t)},{default:i((()=>[c(s,{class:v(d(I).e("option-label"))},{default:i((()=>[h(_(e.labelRender?e.labelRender(a):a[d(N).label]),1)])),_:2},1032,["class"]),c(s,{class:v(d(I).e("option-icon"))},{default:i((()=>[c(A,{name:"success"})])),_:1},8,["class"])])),_:2},1032,["class","onClick"])))),128))])),_:2},1032,["class"]),c(s,{class:v(d(o)(d(I).e("loading-wrapper"),d(I).em("loading-wrapper","show",0===l.options.length)))},{default:i((()=>[c(s,{class:v(d(I).e("loading"))},{default:i((()=>[c(k)])),_:1},8,["class"])])),_:2},1032,["class"])])),_:2},1032,["class"])])),_:2},1032,["class"])))),128))])),_:1},8,["class","style"])])),_:1},8,["class"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-25d2d449"]]);export{I as S,w as c,C as d,T as g};

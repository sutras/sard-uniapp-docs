import{_ as e}from"./picker-input.vue_vue_type_script_setup_true_lang.56db3c18.js";import{d as a,g as l,C as s,A as i,o as t,f as o,w as r,e as n,c as u,b as m,F as d,i as p,S as c,H as f,r as g,a as h,l as _}from"./index-6f8f5948.js";import{_ as j,a as b}from"./form.70bbbf4a.js";import{S as v}from"./input.a4dc6f6c.js";import{a as x}from"./index.09d87181.js";import{_ as V}from"./button.8a95f6cb.js";import{_ as k}from"./index.b4cc07cd.js";import"./popout-input.51e07b6a.js";import"./common.097e1cb5.js";import"./popout.964827c0.js";import"./picker.b82e6532.js";import"./dom.f92aa117.js";const y=a({__name:"ComplexDynamicFormItem",setup(a){const y=[{label:"Beijing",value:"Beijing"},{label:"Shanghai",value:"Shanghai"}],S={Beijing:["Tiananmen","Great Wall"],Shanghai:["Oriental Pearl","The Bund"]},C=l(),w=s({sights:[],area:""});i((()=>w.area),(()=>{w.sights=[]}));const U=()=>{var e;null==(e=C.value)||e.validate().then((()=>{console.log("Received values of form:",c(w)),f("success")})).catch((()=>{console.log("fail")}))};return(a,l)=>{const s=g(h("sar-picker-input"),e),i=g(h("sar-form-item"),j),c=g(h("sar-input"),v),f=g(h("sar-icon"),x),A=g(h("sar-button"),V),B=_,q=g(h("sar-form"),b),M=g(h("doc-page"),k);return t(),o(M,null,{default:r((()=>[n(q,{ref_key:"formRef",ref:C,model:w},{default:r((()=>[n(i,{name:"area",label:"Area",rules:[{required:!0,message:"Missing area"}]},{default:r((()=>[n(s,{modelValue:w.area,"onUpdate:modelValue":l[0]||(l[0]=e=>w.area=e),placeholder:"Area",columns:y},null,8,["modelValue"])])),_:1}),(t(!0),u(d,null,m(w.sights,((e,a)=>(t(),o(i,{key:e.id},{default:r((()=>[n(B,{style:{display:"flex","align-items":"center",gap:"20rpx"}},{default:r((()=>[n(i,{name:["sights",a,"value"],label:"Sight","label-width":"100rpx",rules:{required:!0,message:"Missing sight"},inlaid:""},{default:r((()=>[n(s,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,placeholder:"Sight",disabled:!w.area,columns:(S[w.area]||[]).map((e=>({value:e,label:e})))},null,8,["modelValue","onUpdate:modelValue","disabled","columns"])])),_:2},1032,["name"]),n(i,{name:["sights",a,"price"],label:"Price","label-width":"100rpx",rules:{required:!0,message:"Missing price"},inlaid:""},{default:r((()=>[n(c,{inlaid:"",placeholder:"Price",modelValue:e.price,"onUpdate:modelValue":a=>e.price=a},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["name"]),n(A,{type:"mild",size:"small",onClick:a=>(e=>{const a=w.sights.indexOf(e);-1!==a&&w.sights.splice(a,1)})(e)},{default:r((()=>[n(f,{name:"minus"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128)),n(i,null,{default:r((()=>[n(A,{type:"outline",onClick:l[1]||(l[1]=e=>{w.sights.push({value:"",price:"",id:Date.now()})})},{default:r((()=>[n(f,{name:"plus"}),p(" Add sights ")])),_:1})])),_:1}),n(i,null,{default:r((()=>[n(A,{onClick:U},{default:r((()=>[p("Submit")])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})}}});export{y as default};

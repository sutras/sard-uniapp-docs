import{_ as e}from"./index.3d69d03d.js";import{d as l,T as t,p as a,q as o,s,o as r,f as n,w as u,x as i,i as d,t as m,u as p,e as c,v,h as f,y as g,l as _,g as x,c as y,b as h,F as T,r as b,a as j,H as S,M as k,V as R}from"./index-aa8abc65.js";import{a as w,_ as C}from"./index.5a4c2473.js";import{b as M,_ as V}from"./index.776be883.js";import{_ as $,a as I}from"./radio-group.d4f4c904.js";import{_ as L,a as A}from"./list.1a8a7167.js";import{_ as H}from"./pull-down-refresh.a3f369ee.js";import"./common.c6a791ea.js";import"./dom.06da4e90.js";const q=V(l({options:{virtualHost:!0,styleIsolation:"shared"},__name:"load-more",props:{rootStyle:[String,Object,Array],rootClass:String,status:{type:String,default:"incomplete"},incompleteText:String,loadingText:String,completeText:String,errorText:String},emits:["load-more","reload"],setup(e,{emit:l}){const x=e,y=M("load-more"),{t:h}=t("loadMore"),T=()=>{"incomplete"===x.status?l("load-more"):"error"===x.status&&l("reload")},b=a((()=>o(y.b(),y.m(x.status),x.rootClass))),j=a((()=>s(x.rootStyle)));return(e,l)=>{const t=_;return r(),n(t,{class:f(p(b)),style:g(p(j)),onClick:T},{default:u((()=>["incomplete"===e.status?i(e.$slots,"incomplete",{key:0},(()=>[d(m(e.incompleteText||p(h)("incompleteText")),1)]),!0):"loading"===e.status?i(e.$slots,"loading",{key:1},(()=>[c(w,null,{default:u((()=>[d(m(e.loadingText||p(h)("loadingText")),1)])),_:1})]),!0):"complete"===e.status?i(e.$slots,"complete",{key:2},(()=>[d(m(e.completeText||p(h)("completeText")),1)]),!0):"error"===e.status?i(e.$slots,"error",{key:3},(()=>[d(m(e.errorText||p(h)("errorText")),1)]),!0):v("",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-6676d586"]]),B=l({__name:"Basic",setup(e){const l=x("incomplete"),t=["incomplete","loading","complete","error"];return(e,a)=>{const o=b(j("sar-load-more"),q),s=b(j("sar-radio"),$),i=b(j("sar-list-item"),L),d=b(j("sar-list"),A),m=b(j("sar-radio-group"),I),v=_;return r(),n(v,null,{default:u((()=>[c(o,{status:l.value,onLoadMore:a[0]||(a[0]=e=>p(S)("加载更多")),onReload:a[1]||(a[1]=e=>p(S)("重新加载"))},null,8,["status"]),c(m,{modelValue:l.value,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value=e),"root-style":"margin-top: 40rpx"},{custom:u((({toggle:e})=>[c(d,{card:""},{default:u((()=>[(r(),y(T,null,h(t,((l,t)=>c(i,{key:t,title:l,hover:"",onClick:t=>e(l)},{icon:u((()=>[c(s,{readonly:"",value:l},null,8,["value"])])),_:2},1032,["title","onClick"]))),64))])),_:2},1024)])),_:1},8,["modelValue"])])),_:1})}}}),D=l({__name:"WithRefresh",setup(e){const l=x(1),t=x([]),a=e=>new Promise(((l,t)=>{setTimeout((()=>{Math.random()<.55?l({page:e,total:3,list:e>3?[]:Array(4).fill(0).map(((l,t)=>t+1+4*(e-1)))}):t()}),1e3)})),o=x(!1),s=x(),i=e=>{var l;null==(l=s.value)||l.enableToRefresh(0===e.detail.scrollTop)},p=()=>{var e;null==(e=s.value)||e.enableToRefresh(!0)},v=()=>{o.value=!0,a(1).then((e=>{l.value=1,t.value=e.list,f.value=e.page<e.total?"incomplete":"complete",S("刷新成功")})).catch((()=>{S("刷新失败")})).finally((()=>{o.value=!1}))},f=x("incomplete"),g=e=>{f.value="loading",a(e).then((e=>{t.value=[...t.value,...e.list],f.value=e.page<e.total?"incomplete":"complete"})).catch((()=>{f.value="error"}))},w=()=>{o.value||g(++l.value)},C=()=>{o.value||g(l.value)},M=()=>{o.value||"incomplete"!==f.value||g(++l.value)};return k((()=>{g(l.value)})),(e,l)=>{const a=_,g=b(j("sar-load-more"),q),x=b(j("sar-pull-down-refresh"),H),S=R;return r(),n(a,null,{default:u((()=>[c(S,{"scroll-y":"",style:{height:"300px",margin:"20rpx 0",border:"1px solid var(--sar-border-color)"},throttle:!1,onScroll:i,onScrolltoupper:p,onScrolltolower:M},{default:u((()=>[c(x,{loading:o.value,ref_key:"pullDownRefresh",ref:s,onRefresh:v,disabled:"loading"===f.value},{default:u((()=>[(r(!0),y(T,null,h(t.value,(e=>(r(),n(a,{key:e,style:{display:"flex","justify-content":"center","align-items":"center",margin:"10rpx 32rpx",height:"40px",border:"1px solid var(--sar-border-color)"}},{default:u((()=>[d(m(e),1)])),_:2},1024)))),128)),c(g,{status:f.value,onLoadMore:w,onReload:C},null,8,["status"])])),_:1},8,["loading","disabled"])])),_:1})])),_:1})}}}),F=V(l({__name:"index",setup:l=>(l,t)=>{const a=b(j("doc-demo"),e),o=b(j("doc-page"),C);return r(),n(o,null,{default:u((()=>[c(a,{title:"基础使用"},{default:u((()=>[c(B)])),_:1}),c(a,{title:"配合下拉刷新一起使用"},{default:u((()=>[c(D)])),_:1})])),_:1})}}),[["__scopeId","data-v-96b875d4"]]);export{F as default};

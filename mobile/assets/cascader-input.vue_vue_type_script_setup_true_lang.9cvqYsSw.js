import{E as e,d as l,G as o,g as a,A as s,p as t,o as i,c as n,e as d,w as u,f as r,v as p,s as v,F as m,y as c}from"./index-cDBoG4Q4.js";import{_ as y}from"./popout-input.DLagpS1q.js";import{S as b,d as f,g as h}from"./cascader.B298QVje.js";import{_ as C}from"./popout.BRZj-Jq_.js";import{u as V}from"./common.C5AqtFVf.js";const g=e.cascaderInput,j=l({options:{virtualHost:!0,styleIsolation:"shared"},__name:"cascader-input",props:o({visible:{type:Boolean},title:{},showConfirm:{type:Boolean},validateEvent:{type:Boolean},rootStyle:{},rootClass:{},modelValue:{},options:{},fieldKeys:{},hintText:{},labelRender:{type:Function},placeholder:{},readonly:{type:Boolean},disabled:{type:Boolean},clearable:{type:Boolean},loading:{type:Boolean}},g),emits:["update:visible","update:model-value","select"],setup(e,{emit:l}){const o=e,g=l,j=V(),w=a(o.modelValue);s((()=>o.modelValue),(()=>{w.value=o.modelValue,o.validateEvent&&(null==j||j.onChange())}));const B=a(o.modelValue);s(w,(()=>{B.value=w.value}));const _=()=>{w.value=B.value,g("update:model-value",B.value),k.value=S()},x=e=>{B.value=e,o.showConfirm||c(B.value)||(_(),K.value=!1)},k=a(""),I=t((()=>Object.assign({},f,o.fieldKeys)));function S(){return c(w.value)||!o.options?"":function(e,l,o){const a=h(e,l,o);return a?a.map((e=>e[o.label])).join("/"):""}(o.options,w.value,I.value)}s(w,(()=>{k.value=S()}),{immediate:!0}),s((()=>o.options),(()=>{k.value=S()}));const E=()=>{k.value="",w.value=void 0,g("update:model-value",void 0)},K=a(o.visible);s((()=>o.visible),(()=>{K.value=o.visible}));const U=e=>{K.value=e,g("update:visible",e)},F=()=>{K.value=!0,g("update:visible",!0)};return(e,l)=>(i(),n(m,null,[d(y,{modelValue:k.value,"onUpdate:modelValue":l[0]||(l[0]=e=>k.value=e),placeholder:e.placeholder,readonly:e.readonly,disabled:e.disabled,clearable:e.clearable,onClear:E,onClick:F,loading:e.loading},null,8,["modelValue","placeholder","readonly","disabled","clearable","loading"]),d(C,{"root-class":e.rootClass,"root-style":e.rootStyle,visible:K.value,"onUpdate:visible":U,title:e.title??e.placeholder,"show-confirm":e.showConfirm,onConfirm:_},{visible:u((({already:o})=>[o?(i(),r(b,{key:0,"model-value":B.value,"onUpdate:modelValue":x,options:e.options,"field-keys":e.fieldKeys,placeholder:e.hintText,onSelect:l[1]||(l[1]=(l,o)=>e.$emit("select",l,o))},{top:u((({tabIndex:l})=>[p(e.$slots,"top",{tabIndex:l})])),_:3},8,["model-value","options","field-keys","placeholder"])):v("",!0)])),_:3},8,["root-class","root-style","visible","title","show-confirm"])],64))}});export{j as _};

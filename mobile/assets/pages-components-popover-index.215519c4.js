import{_ as t}from"./index.5ae075dd.js";import{M as e,L as o,E as n,d as i,K as l,m as a,p as r,q as s,s as c,o as u,f as d,w as p,x as f,h as m,u as _,y as v,l as h,ap as b,W as x,v as g,e as w,i as y,t as k,c as S,F as C,b as j,g as I,C as H,D as G,A as $,Z as A,B,H as F,r as W,a as z}from"./index-6f8f5948.js";import{d as E,g as O,f as R,_ as D}from"./index.b4cc07cd.js";import{_ as M}from"./button.8a95f6cb.js";import{g as L}from"./dom.f92aa117.js";import{a as N,b as T,_ as P}from"./index.09d87181.js";import{_ as U,a as q}from"./grid.33cf1e63.js";import{_ as K,a as V}from"./list.8654b49f.js";import"./common.097e1cb5.js";function Z(t){const n=o();let i,l;function a(){if(l){const t=l;return l=void 0,t()}if(t)return L(t,n)}e((()=>{null==i||i.register({getRect:a})}));return{show:e=>{l=e,(t||l)&&(null==i||i.show())},_inject:function(t){i=t}}}const J={rootStyle:[String,Object,Array],rootClass:String,visible:Boolean,options:Array,position:{type:String,default:n.popover.position},direction:{type:String,default:n.popover.direction},theme:{type:String,default:n.popover.theme},refGap:{type:Number,default:n.popover.refGap},viewportGap:{type:Number,default:n.popover.viewportGap},transparent:{type:Boolean,default:n.popover.transparent},duration:{type:Number,default:n.popover.duration},controller:Object},Q={rootStyle:[String,Object,Array],rootClass:String},X=Symbol("popover-context"),Y=i({options:{virtualHost:!0,styleIsolation:"shared"},__name:"popover-reference",props:Q,emits:["click"],setup(t,{emit:n}){const i=t,b=l(),x=o(),g=a(X),w=()=>L(`#${b}`,x);e((()=>{null==g||g.register({getRect:w})}));const y=t=>{null==g||g.show(),n("click",t)},k=r((()=>s(i.rootClass))),S=r((()=>c(i.rootStyle)));return(t,e)=>{const o=h;return u(),d(o,{class:m(_(k)),style:v(_(S)),id:_(b),onClick:y},{default:p((()=>[f(t.$slots,"default")])),_:3},8,["class","style","id"])}}}),tt=["top","right","bottom","left"];function et(t){const e=tt.indexOf(t);return tt[e+2]??tt[e-2]}function ot(t){return"top"===t?"height":"width"}const nt={rootStyle:[String,Object,Array],rootClass:String,options:{type:Array,default:()=>[]},direction:String,theme:String},it=P(i({options:{virtualHost:!0,styleIsolation:"shared"},__name:"menu-item",props:{text:String,disabled:Boolean,icon:String,iconFamily:String,withIcon:Boolean,direction:String},emits:["click"],setup(t,{emit:e}){const o=t,n=T("menu"),i=t=>{e("click",t)},l=r((()=>s(n.e("item"),n.em("item","disabled",o.disabled))));return(t,e)=>{const o=h;return u(),d(o,{class:m(_(l)),onClick:i},{default:p((()=>[t.icon||t.withIcon&&"vertical"===t.direction?(u(),d(o,{key:0,class:m(_(n).e("icon"))},{default:p((()=>[t.icon?(u(),d(N,{key:0,name:t.icon,family:t.iconFamily},null,8,["name","family"])):g("",!0)])),_:1},8,["class"])):g("",!0),w(o,{class:m(_(n).e("text"))},{default:p((()=>[y(k(t.text),1)])),_:1},8,["class"])])),_:1},8,["class"])}}}),[["__scopeId","data-v-7a62a2ee"]]),lt=P(i({options:{virtualHost:!0,styleIsolation:"shared"},__name:"menu",props:nt,emits:["select"],setup(t,{emit:e}){const o=t,n=T("menu"),i=r((()=>o.options.some((t=>!!t.icon)))),l=r((()=>s(n.b(),n.m(o.direction),n.m(o.theme),n.m("with-icon",i.value),o.rootClass))),a=r((()=>c(o.rootStyle)));return(t,o)=>{const n=h;return u(),d(n,{class:m(_(l)),style:v(_(a))},{default:p((()=>[(u(!0),S(C,null,j(t.options,((o,n)=>(u(),d(it,{key:n,text:o.text,icon:o.icon,"icon-family":o.iconFamily,disabled:o.disabled,"with-icon":_(i),direction:t.direction,onClick:t=>(t=>{t.disabled||e("select",t)})(o)},null,8,["text","icon","icon-family","disabled","with-icon","direction","onClick"])))),128))])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-f4cda029"]]),at=P(i({options:{virtualHost:!0,styleIsolation:"shared"},__name:"popover",props:J,emits:["update:visible","select"],setup(t,{emit:e}){const n=t,i=T("popover"),a=I(n.visible),y=I(!1),k=o(),j=l(),F=I({top:"0",left:"0"}),W=I({top:"0",left:"0"}),z=async()=>{const[t,e]=await Promise.all([V(),L(`#${j}`,k)]);if(t){const[o,i]=function(t,e,{refGap:o,position:n,viewportGap:i,arrowSize:l}){const a=e.width+o,r=e.height+o,s=b(),c=s.windowWidth,u=s.windowHeight,d={top:t.top-r-i,right:c-t.right-a-i,bottom:u-t.bottom-r-i,left:t.left-a-i};let[p,f]=n.split("-");d[p]<0&&(p=et(p),d[p]<0&&(p=et(p))),f=f||"center";const m=function(t){return["top","bottom"].includes(t)?"left":"top"}(p),_=function(t){return"top"===t?"left":"top"}(m),v=ot(m),h=ot(_),g="top"===m?u:c,w="top"===m?c:u,y={top:0,left:0};y[_]=function(){const n={top:()=>t.top-o-e.height,right:()=>t.right+o,bottom:()=>t.bottom+o,left:()=>t.left-o-e.width}[p]();return x(n,i,w-e[h]-i)}(),y[m]=function(){const o={start:()=>t[m],center:()=>t[m]-(e[v]-t[v])/2,end:()=>t[m]-(e[v]-t[v])}[f]();return x(o,i,g-e[v]-i)}();const k={top:y.top,left:y.left,bottom:y.top+e.height,right:y.left+e.width},S={top:0,left:0};return S[m]=function(){const o=et(m);let n=t[m]-k[m];n<0&&(n=0);const i=Math.min(t[o],k[o])-Math.max(t[m],k[m]);return x(n+i/2,l,e[v]-l)}(),S[_]=function(t,e){return{top:()=>e.height,right:()=>0,bottom:()=>0,left:()=>e.width}[t]()}(p,e),[y,S]}(t,e,{position:n.position,refGap:n.refGap,viewportGap:n.viewportGap,arrowSize:15});F.value={top:`calc(${o.top}px + var(--window-top))`,left:o.left+"px"},W.value={top:i.top+"px",left:i.left+"px"},y.value=!0}},{realVisible:D,transitionClass:M,onTransitionEnd:N}=E(H({visible:y,duration:G(n,"duration"),prefix:i.m("")}));$((()=>n.visible),(()=>{a.value=n.visible})),$(a,(()=>{a.value?A((()=>{z()})):y.value=!1}));const P=()=>{a.value=!1,e("update:visible",!1)},U=t=>{a.value=!1,e("select",t),e("update:visible",!1)};let q;const K={show(){a.value=!0,e("update:visible",!0)},register(t){q=t}};B(X,K),$((()=>n.controller),(()=>{n.controller&&n.controller._inject(K)}),{immediate:!0});const V=()=>{if(q)return q.getRect()},[Z,J]=O();$(a,(()=>{a.value&&J()}));const Q=r((()=>s(i.b(),i.m(n.theme),M.value,n.rootClass))),Y=r((()=>c({zIndex:Z.value,transformOrigin:`${W.value.left} ${W.value.top}`,opacity:D.value?1:0,animationDuration:n.duration+"ms"},F.value,n.rootStyle)));return(t,e)=>{const o=h;return u(),S(C,null,[f(t.$slots,"default",{},void 0,!0),w(R,{visible:a.value,"z-index":_(Z),transparent:t.transparent,onClick:P},null,8,["visible","z-index","transparent"]),a.value||_(D)?(u(),d(o,{key:0,class:m(_(Q)),style:v(_(Y)),onAnimationend:_(N)},{default:p((()=>[w(o,{class:m(_(i).e("content")),id:_(j)},{default:p((()=>[f(t.$slots,"content",{},(()=>[w(lt,{options:t.options,direction:t.direction,theme:t.theme,onSelect:U},null,8,["options","direction","theme"])]),!0)])),_:3},8,["class","id"]),w(o,{class:m(_(i).e("arrow")),style:v(_(c)(W.value))},null,8,["class","style"])])),_:3},8,["class","style","onAnimationend"])):g("",!0)],64)}}}),[["__scopeId","data-v-db77ec58"]]),rt=i({__name:"Basic",setup(t){const e=[{text:"选项1"},{text:"选项2"},{text:"选项3"}],o=t=>{F(t.text)};return(t,n)=>{const i=W(z("sar-button"),M),l=W(z("sar-popover-reference"),Y),a=W(z("sar-popover"),at);return u(),d(a,{options:e,onSelect:o},{default:p((()=>[w(l,null,{default:p((()=>[w(i,null,{default:p((()=>[y("显示气泡弹出框")])),_:1})])),_:1})])),_:1})}}}),st=i({__name:"Dark",setup(t){const e=[{text:"选项1"},{text:"选项2"},{text:"选项3"}],o=t=>{F(t.text)};return(t,n)=>{const i=W(z("sar-button"),M),l=W(z("sar-popover-reference"),Y),a=W(z("sar-popover"),at);return u(),d(a,{theme:"dark",options:e,onSelect:o},{default:p((()=>[w(l,null,{default:p((()=>[w(i,null,{default:p((()=>[y("显示气泡弹出框")])),_:1})])),_:1})])),_:1})}}}),ct=i({__name:"Icon",setup(t){const e=[{text:"选项1",icon:"upc-scan",iconFamily:"demo-icons"},{text:"选项2",icon:"camera",iconFamily:"demo-icons"},{text:"选项3"}],o=t=>{F(t.text)};return(t,n)=>{const i=W(z("sar-button"),M),l=W(z("sar-popover-reference"),Y),a=W(z("sar-popover"),at);return u(),d(a,{theme:"dark",options:e,onSelect:o},{default:p((()=>[w(l,null,{default:p((()=>[w(i,null,{default:p((()=>[y("显示气泡弹出框")])),_:1})])),_:1})])),_:1})}}}),ut=i({__name:"Disabled",setup(t){const e=[{text:"选项1",disabled:!0},{text:"选项2",disabled:!0},{text:"选项3"}],o=t=>{F(t.text)};return(t,n)=>{const i=W(z("sar-button"),M),l=W(z("sar-popover-reference"),Y),a=W(z("sar-popover"),at);return u(),d(a,{options:e,onSelect:o},{default:p((()=>[w(l,null,{default:p((()=>[w(i,null,{default:p((()=>[y("显示气泡弹出框")])),_:1})])),_:1})])),_:1})}}}),dt=i({__name:"Horizontal",setup(t){const e=[{text:"选项1",icon:"upc-scan",iconFamily:"demo-icons"},{text:"选项2"},{text:"选项3"}],o=t=>{F(t.text)};return(t,n)=>{const i=W(z("sar-button"),M),l=W(z("sar-popover-reference"),Y),a=W(z("sar-popover"),at);return u(),d(a,{direction:"horizontal",options:e,onSelect:o},{default:p((()=>[w(l,null,{default:p((()=>[w(i,null,{default:p((()=>[y("显示气泡弹出框")])),_:1})])),_:1})])),_:1})}}}),pt=i({__name:"Content",setup(t){const e=I(!1);return(t,o)=>{const n=W(z("sar-button"),M),i=W(z("sar-popover-reference"),Y),l=W(z("sar-grid-item"),U),a=W(z("sar-grid"),q),r=W(z("sar-popover"),at);return u(),d(r,{visible:e.value,"onUpdate:visible":o[0]||(o[0]=t=>e.value=t)},{content:p((()=>[w(a,{clickable:"","root-style":"width: 560rpx"},{default:p((()=>[(u(),S(C,null,j(8,(t=>w(l,{key:t,text:`选项${t}`,icon:"image",onClick:o=>(t=>{F(`选项${t}`),e.value=!1})(t)},null,8,["text","onClick"]))),64))])),_:1})])),default:p((()=>[w(i,null,{default:p((()=>[w(n,null,{default:p((()=>[y("显示气泡弹出框")])),_:1})])),_:1})])),_:1},8,["visible"])}}}),ft=P(i({__name:"CustomReference",setup(t){const e=Z("#refId"),o=[{text:"选项1"},{text:"选项2"},{text:"选项3"}],n=t=>{F(t.text)},i=()=>{e.show()};return(t,l)=>{const a=W(z("sar-popover"),at),r=h;return u(),S(C,null,[w(a,{options:o,onSelect:n,controller:_(e),position:"right"},null,8,["controller"]),w(r,{onClick:i,class:"popover-box",id:"refId"},{default:p((()=>[y("box")])),_:1})],64)}}}),[["__scopeId","data-v-3e51158c"]]),mt=P(i({__name:"Position",setup(t){const e=I("bottom"),o=I(!1),n=[{text:"选项1"},{text:"选项2"},{text:"选项3"}],i=t=>{e.value=t,o.value=!0},l=t=>{F(t.text)};return(t,a)=>{const r=W(z("sar-grid-item"),U),s=W(z("sar-grid"),q),c=h,d=W(z("sar-popover-reference"),Y),f=W(z("sar-popover"),at);return u(),S(C,null,[w(c,{style:{margin:"0 120rpx"}},{default:p((()=>[w(s,{columns:3,clickable:""},{default:p((()=>[w(r,{onClick:a[0]||(a[0]=t=>i("top-start"))},{default:p((()=>[y("TS")])),_:1}),w(r,{onClick:a[1]||(a[1]=t=>i("top"))},{default:p((()=>[y("top")])),_:1}),w(r,{onClick:a[2]||(a[2]=t=>i("top-end"))},{default:p((()=>[y("TE")])),_:1})])),_:1})])),_:1}),w(c,{style:{display:"flex","flex-direction":"row","justify-content":"space-between"}},{default:p((()=>[w(s,{columns:1,clickable:"","root-style":"width: 120rpx"},{default:p((()=>[w(r,{onClick:a[3]||(a[3]=t=>i("left-start"))},{default:p((()=>[y("LS")])),_:1}),w(r,{onClick:a[4]||(a[4]=t=>i("left"))},{default:p((()=>[y("left")])),_:1}),w(r,{onClick:a[5]||(a[5]=t=>i("left-end"))},{default:p((()=>[y("LE")])),_:1})])),_:1}),w(f,{options:n,visible:o.value,"onUpdate:visible":a[6]||(a[6]=t=>o.value=t),position:e.value,onSelect:l},{default:p((()=>[w(d,{"root-style":{display:"flex",justifyContent:"center",alignItems:"center",width:"200rpx",height:"200rpx",margin:"auto",background:"var(--sar-orange)"}},{default:p((()=>[y(" box ")])),_:1},8,["root-style"])])),_:1},8,["visible","position"]),w(s,{columns:1,clickable:"","root-style":"width: 120rpx"},{default:p((()=>[w(r,{onClick:a[7]||(a[7]=t=>i("right-start"))},{default:p((()=>[y("RS")])),_:1}),w(r,{onClick:a[8]||(a[8]=t=>i("right"))},{default:p((()=>[y("right")])),_:1}),w(r,{onClick:a[9]||(a[9]=t=>i("right-end"))},{default:p((()=>[y("RE")])),_:1})])),_:1})])),_:1}),w(c,{style:{margin:"0 120rpx"}},{default:p((()=>[w(s,{columns:3,clickable:""},{default:p((()=>[w(r,{onClick:a[10]||(a[10]=t=>i("bottom-start"))},{default:p((()=>[y("BS")])),_:1}),w(r,{onClick:a[11]||(a[11]=t=>i("bottom"))},{default:p((()=>[y("bottom")])),_:1}),w(r,{onClick:a[12]||(a[12]=t=>i("bottom-end"))},{default:p((()=>[y("BE")])),_:1})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-aaa78706"]]),_t=i({__name:"Manual",setup(t){const e=I("bottom"),o=Z(),n=()=>{e.value="bottom",o.show((()=>{const t=b();return{width:t.windowWidth,height:10,left:0,right:t.windowWidth,top:t.windowHeight-10,bottom:t.windowHeight}}))},i=()=>{e.value="bottom-end",o.show((()=>{const t=b();return{width:10,height:10,left:t.windowWidth-10,right:t.windowWidth,top:t.windowHeight-10,bottom:t.windowHeight}}))},l=()=>{e.value="top",o.show((()=>{const t=b();return{width:t.windowWidth,height:10,left:0,right:t.windowWidth,top:0,bottom:10}}))},a=[{text:"选项1"},{text:"选项2"},{text:"选项3"}],r=t=>{F(t.text)};return(t,s)=>{const c=W(z("sar-popover"),at),d=W(z("sar-list-item"),K),f=W(z("sar-list"),V);return u(),S(C,null,[w(c,{options:a,onSelect:r,position:e.value,controller:_(o)},null,8,["position","controller"]),w(f,{card:""},{default:p((()=>[w(d,{arrow:"",hover:"",title:"屏幕中下",onClick:n}),w(d,{arrow:"",hover:"",title:"屏幕右下",onClick:i}),w(d,{arrow:"",hover:"",title:"屏幕中上",onClick:l})])),_:1})],64)}}}),vt=P(i({__name:"index",setup:e=>(e,o)=>{const n=W(z("doc-demo"),t),i=W(z("doc-page"),D);return u(),d(i,null,{default:p((()=>[w(n,{title:"基础使用"},{default:p((()=>[w(rt)])),_:1}),w(n,{title:"暗黑模式"},{default:p((()=>[w(st)])),_:1}),w(n,{title:"展示图标"},{default:p((()=>[w(ct)])),_:1}),w(n,{title:"禁用选项"},{default:p((()=>[w(ut)])),_:1}),w(n,{title:"水平排列"},{default:p((()=>[w(dt)])),_:1}),w(n,{title:"自定义内容"},{default:p((()=>[w(pt)])),_:1}),w(n,{title:"弹出位置"},{default:p((()=>[w(mt)])),_:1}),w(n,{title:"自定义reference"},{default:p((()=>[w(ft)])),_:1}),w(n,{title:"手动定义位置"},{default:p((()=>[w(_t)])),_:1})])),_:1})}}),[["__scopeId","data-v-1c33c2c5"]]);export{vt as default};

import{_ as e}from"./index.5ae075dd.js";import{d as s,m as t,K as n,aw as a,p as o,q as r,s as l,o as c,f as i,w as u,x as d,i as v,t as p,h as m,u as h,y as f,l as _,L as y,g as x,C as g,E as b,c as S,F as w,b as T,e as j,v as I,R as C,ap as k,W as E,A,z as L,Z as $,M as H,B as N,V as O,r as q,a as B}from"./index-6f8f5948.js";import{d as G,e as M,_ as R}from"./index.b4cc07cd.js";import{b as z,_ as D}from"./index.09d87181.js";import{g as F,t as P,m as Q}from"./dom.f92aa117.js";import{_ as V,a as Y}from"./list.8654b49f.js";import{_ as Z}from"./button.8a95f6cb.js";import"./common.097e1cb5.js";const J={rootStyle:[String,Object,Array],rootClass:String,current:[String,Number]},K={rootStyle:[String,Object,Array],rootClass:String,name:{type:[String,Number],required:!0}},W={anchors:{type:Array,required:!0},current:[Number,String]},X=Symbol("indexes-context"),U=D(s({options:{virtualHost:!0,styleIsolation:"shared"},__name:"indexes-anchor",props:K,setup(e){const s=e,x=z("indexes"),g=t(X);if(!g)throw new Error("IndexesAnchor must be included in Indexes.");const b=n(),S=y(),w=()=>F(`#${b}`,S);a((()=>{g.register(s.name,{getRect:w,id:b})}));const T=o((()=>r(x.e("anchor"),s.rootClass))),j=o((()=>l(s.rootStyle)));return(e,s)=>{const t=_;return c(),i(t,{class:m(h(T)),style:f(h(j)),id:h(b)},{default:u((()=>[d(e.$slots,"default",{},(()=>[v(p(e.name),1)]),!0)])),_:3},8,["class","style","id"])}}}),[["__scopeId","data-v-c9815141"]]),ee=D(s({options:{virtualHost:!0,styleIsolation:"shared"},__name:"indexes-nav",props:W,emits:["select"],setup(e,{emit:s}){const t=e,a=z("indexes"),d=y(),A=n(),L=x(),$=x(!1);let H=null,N=!1;const{realVisible:O,transitionClass:q,onTransitionEnd:B}=G(g({visible:$,duration:b.indexes.hintDuration,prefix:a.em("hint","")})),M=o((()=>{let e=void 0!==t.current?t.anchors.indexOf(t.current):-1;return e<0&&(e=0),20*e+10+"px"})),R=e=>{if(!L.value)return;const n=e.clientY-L.value.top,a=E(Math.floor(n/20),0,t.anchors.length-1);a!==H&&(H=a,s("select",t.anchors[a]))},D=async e=>{$.value=!0,await(async()=>{L.value=await F(`#${A}`,d)})(),N||R(e.touches[0])},Q=e=>{N=!0,L.value&&R(e.touches[0])},V=()=>{$.value=!1,N=!1,L.value=void 0,H=null},Y=e=>{const s=k();D(P(e,s.windowTop));const t=e=>{e.preventDefault(),Q(P(e,s.windowTop))},n=()=>{V(),document.removeEventListener("mouseup",n),document.removeEventListener("mousemove",t)};document.addEventListener("mousemove",t),document.addEventListener("mouseup",n)},Z=o((()=>r(a.e("nav")))),J=o((()=>l({"--sar-indexes-nav-item-size":"20px"})));return(e,s)=>{const t=_;return c(),i(t,{class:m(h(Z)),style:f(h(J)),id:h(A),onTouchstart:D,onTouchmove:C(Q,["stop","prevent"]),onTouchend:V,onTouchcancel:V,onMousedown:Y},{default:u((()=>[(c(!0),S(w,null,T(e.anchors,((s,n)=>(c(),i(t,{key:n,class:m(h(r)(h(a).e("nav-item"),h(a).em("nav-item","active",s===e.current)))},{default:u((()=>[v(p(s),1)])),_:2},1032,["class"])))),128)),h(O)?(c(),i(t,{key:0,class:m(h(r)(h(a).e("hint"),h(q))),style:f(h(l)({top:h(M)})),onTransitionend:h(B)},{default:u((()=>[j(t,{class:m(h(a).e("hint-text"))},{default:u((()=>[v(p(e.current),1)])),_:1},8,["class"])])),_:1},8,["class","style","onTransitionend"])):I("",!0)])),_:1},8,["class","style","id","onTouchmove"])}}}),[["__scopeId","data-v-f3eb6f37"]]),se=D(s({options:{virtualHost:!0,styleIsolation:"shared"},__name:"indexes",props:J,emits:["change"],setup(e,{expose:s,emit:t}){const a=e,v=z("indexes"),p=x(a.current);A((()=>a.current),(()=>{!L(a.current)&&G.value.includes(a.current)&&(p.value=a.current,k(a.current))}));const g=y(),b=n(),S=x(),w=x(0),T=x(0);let I=!1;const[C]=M((()=>{I=!1})),k=e=>{if(!S.value)return;I=!0,C(150);const s=q.value.find((s=>s[0]===e));if(s){const e=s[1].top-S.value.top;w.value=void 0,$((()=>{w.value=e}))}};s({scrollTo:k});const E=e=>{T.value=e.detail.scrollTop,!I&&S.value&&Q(q.value.map((e=>e[1])),(e=>{const s=q.value[e][0];s!==p.value&&(p.value=s,t("change",s))}),{offset:S.value.top+T.value})};H((()=>{F(`#${b}`,g).then((e=>{S.value=e}))}));const q=x([]),B=x({});N(X,{register(e,s){B.value[e]=s},unregister(e){delete B.value[e]}});H((()=>{$((()=>{(async()=>(await Promise.all(Object.keys(B.value).map((e=>{const{getRect:s}=B.value[e];return new Promise((t=>{s().then((s=>{t([e,s])}))}))})))).sort(((e,s)=>e[1].top-s[1].top)))().then((e=>{q.value=e,L(a.current)||k(a.current)}))}))}));const G=o((()=>q.value.map((e=>e[0])))),R=e=>{p.value=e,k(e),t("change",e)},D=o((()=>r(v.b(),a.rootClass))),P=o((()=>l(a.rootStyle)));return(e,s)=>{const t=O,n=_;return c(),i(n,{class:m(h(D)),style:f(h(P))},{default:u((()=>[j(t,{class:m(h(v).e("scroll-view")),id:h(b),"scroll-y":"","scroll-top":w.value,onScroll:E},{default:u((()=>[d(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","id","scroll-top"]),j(ee,{anchors:h(G),current:p.value,onSelect:R},null,8,["anchors","current"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-2d0dc0fc"]]),te=s({__name:"Basic",setup(e){const s=[{anchor:"A",provinces:["安徽省","澳门特别行政区"]},{anchor:"B",provinces:["北京市"]},{anchor:"C",provinces:["重庆市"]},{anchor:"F",provinces:["福建省"]},{anchor:"G",provinces:["甘肃省","广东省","广西壮族自治区","贵州省"]},{anchor:"H",provinces:["海南省","河北省","河南省","黑龙江省","湖北省","湖南省"]},{anchor:"J",provinces:["吉林省","江苏省","江西省"]},{anchor:"L",provinces:["辽宁省"]},{anchor:"N",provinces:["内蒙古自治区","宁夏回族自治区"]},{anchor:"Q",provinces:["青海省"]},{anchor:"S",provinces:["山东省","山西省","陕西省","上海市","四川省"]},{anchor:"T",provinces:["台湾省","天津市"]},{anchor:"X",provinces:["西藏自治区","香港特别行政区","新疆维吾尔自治区"]},{anchor:"Y",provinces:["云南省"]},{anchor:"Z",provinces:["浙江省"]}],t=x("Q"),n=()=>{t.value=void 0,$((()=>{t.value="G"}))};return(e,a)=>{const o=q(B("sar-indexes-anchor"),U),r=q(B("sar-list-item"),V),l=q(B("sar-list"),Y),d=_,p=q(B("sar-indexes"),se),m=q(B("sar-button"),Z);return c(),S(w,null,[j(p,{current:t.value,"root-style":"height: 640rpx"},{default:u((()=>[(c(),S(w,null,T(s,((e,s)=>j(d,{key:s},{default:u((()=>[j(o,{name:e.anchor},null,8,["name"]),j(l,null,{default:u((()=>[(c(!0),S(w,null,T(e.provinces,((e,s)=>(c(),i(r,{key:s,title:e},null,8,["title"])))),128))])),_:2},1024)])),_:2},1024))),64))])),_:1},8,["current"]),j(m,{onClick:n,"root-style":"margin: 100rpx 40rpx 0"},{default:u((()=>[v(" scrollTo G ")])),_:1})],64)}}}),ne=D(s({__name:"index",setup:s=>(s,t)=>{const n=q(B("doc-demo"),e),a=q(B("doc-page"),R);return c(),i(a,null,{default:u((()=>[j(n,{title:"基础使用",full:""},{default:u((()=>[j(te)])),_:1})])),_:1})}}),[["__scopeId","data-v-aaacb0fc"]]);export{ne as default};

import{E as e,d as a,G as l,p as t,g as s,A as o,L as n,o as u,f as i,w as r,e as c,h as v,u as m,x as d,z as h,q as y,T as p,v as b,i as f,t as g,s as w,c as x,F as k,b as C,Y as _,aq as S,a5 as T,W as A,ar as B,l as z,M as E}from"./index-GlWSIXJ_.js";import{b as V,_ as L}from"./index.DZ-iMJGl.js";import{g as M,t as P}from"./dom.BhynX98V.js";import{a as $,u as j}from"./common.B4tyeXSZ.js";const Y=e.slider,X=L(a({options:{virtualHost:!0,styleIsolation:"shared"},__name:"slider",props:l({rootStyle:{},rootClass:{},range:{type:Boolean},modelValue:{},min:{},max:{},step:{},vertical:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean},pieceColor:{},trackColor:{},trackSize:{},thumbColor:{},thumbSize:{},showValue:{type:Boolean},valuePosition:{},valueBackground:{},valueColor:{},showScale:{type:Boolean},scalePosition:{},validateEvent:{type:Boolean}},Y),emits:["update:model-value","change","drag-start","drag-end"],setup(e,{emit:a}){const l=e,L=a,Y=V("slider"),X=$(),q=j(),I=t((()=>(null==X?void 0:X.disabled)||l.disabled)),D=t((()=>(null==X?void 0:X.readonly)||l.readonly)),F=s(l.modelValue??(l.range?[l.min,l.min]:l.min));o((()=>l.modelValue),(()=>{F.value=l.modelValue??(l.range?[l.min,l.min]:l.min),l.validateEvent&&(null==q||q.onChange())}));const G=n(),H=E();let W,J,K,N=0,O=!1;const Q=async e=>{if(I.value||D.value)return;const{clientY:a,clientX:t}="touches"in e?e.touches[0]:e;W=await M(`#${G}`,H);const s=l.vertical?W.height:W.width,o=((l.vertical?a:t)-(l.vertical?W.top:W.left))/s,n=l.max-l.min,u=_(S(l.min+n*o,l.step),l.min,l.max);let i;if(Array.isArray(F.value)){const[e,a]=F.value;Math.abs(u-a)<=Math.abs(u-e)?u!==F.value[1]&&(i=[e,u]):u!==F.value[0]&&(i=[u,a])}else u!==F.value&&(i=u);void 0!==i&&(F.value=i,L("update:model-value",i),L("change",i))};let R={x:0,y:0};const U=async(e,a)=>{if(I.value||D.value)return;R={x:e.touches[0].clientX,y:e.touches[0].clientY},W=await M(`#${G}`,H);const t=Array.isArray(F.value)?F.value[a]:F.value;N=(t-l.min)/(l.max-l.min),J=F.value,K=F.value},Z=(e,a)=>{if(I.value||D.value)return;if(O||(O=!0,L("drag-start",e)),!W)return;const t=e.touches[0].clientX-R.x,s=e.touches[0].clientY-R.y,o=l.vertical?W.height:W.width,n=(l.vertical?s:t)/o+N,u=l.max-l.min,i=_(S(l.min+u*n,l.step),l.min,l.max);let r;if(Array.isArray(J)){const[e,l]=J;r=1===a?i<e?[i,e]:[e,i]:i>l?[l,i]:[i,l]}else r=i;T(A(r),A(K))||(K=r,F.value=r,L("update:model-value",r))},ee=e=>{O=!1,I.value||D.value||(T(A(J),A(F.value))||L("change",F.value),L("drag-end",e))},ae=(e,a)=>{const l=B();U(P(e,l.windowTop),a);const t=e=>{e.preventDefault(),e.stopPropagation(),Z(P(e,l.windowTop),a)},s=()=>{ee(e),document.removeEventListener("mouseup",s),document.removeEventListener("mousemove",t)};document.addEventListener("mousemove",t),document.addEventListener("mouseup",s)},le=t((()=>{let e,a;return Array.isArray(F.value)?(e=F.value[0],a=F.value[1]):(e=l.min,a=F.value),[e,a]})),te=t((()=>{const e=(le.value[0]-l.min)/(l.max-l.min);return[100*e+"%",100*((le.value[1]-l.min)/(l.max-l.min)-e)+"%"]})),se=t((()=>{if(!l.showScale)return[];const e=l.max-l.min,a=l.vertical?"top":"left",t=[{value:l.min,style:{[a]:"0%"},active:l.min===le.value[0]}];let s=l.min;do{s+=l.step,s>l.max&&(s=l.max),t.push({value:s,style:{[a]:(s-l.min)/e*100+"%"},active:s>=le.value[0]&&s<=le.value[1]})}while(s<l.max);return t})),oe=t((()=>y(Y.b(),Y.m("vertical",l.vertical),Y.m("disabled",I.value),Y.m("readonly",D.value),Y.m("show-scale",l.showScale),Y.m(`scale-${l.scalePosition??(l.vertical?"left":"bottom")}`,l.showScale),l.rootClass))),ne=t((()=>h(l.rootStyle))),ue=t((()=>h({width:l.thumbSize,height:l.thumbSize,backgroundColor:l.thumbColor}))),ie=t((()=>y(Y.e("value"),Y.em("value",l.valuePosition??(l.vertical?"right":"top"))))),re=t((()=>h({backgroundColor:l.valueBackground,color:l.valueColor})));return(e,a)=>{const l=z;return u(),i(l,{class:v(oe.value),style:d(ne.value),onClick:Q},{default:r((()=>[c(l,{class:v(m(Y).e("track")),id:m(G),style:d(m(h)({width:e.vertical?e.trackSize:null,height:e.vertical?null:e.trackSize,backgroundColor:e.trackColor}))},{default:r((()=>[c(l,{class:v(m(Y).e("piece")),style:d(m(h)({[e.vertical?"top":"left"]:te.value[0],[e.vertical?"height":"width"]:te.value[1],backgroundColor:e.pieceColor}))},{default:r((()=>[e.range?(u(),i(l,{key:0,class:v(m(y)(m(Y).e("thumb-container"),m(Y).em("thumb-container","start"))),onTouchstart:a[0]||(a[0]=e=>U(e,0)),onTouchmove:a[1]||(a[1]=p((e=>Z(e,0)),["stop","prevent"])),onTouchend:a[2]||(a[2]=e=>ee(e)),onTouchcancel:a[3]||(a[3]=e=>ee(e)),onMousedown:a[4]||(a[4]=e=>ae(e,0))},{default:r((()=>[b(e.$slots,"start-thumb",{value:le.value[0]},(()=>[c(l,{class:v(m(Y).e("thumb")),style:d(ue.value)},null,8,["class","style"])]),!0),e.showValue?(u(),i(l,{key:0,class:v(ie.value),style:d(re.value)},{default:r((()=>[f(g(le.value[0]),1)])),_:1},8,["class","style"])):w("",!0)])),_:3},8,["class"])):w("",!0),c(l,{class:v(m(y)(m(Y).e("thumb-container"),m(Y).em("thumb-container","end"))),onTouchstart:a[5]||(a[5]=e=>U(e,1)),onTouchmove:a[6]||(a[6]=p((e=>Z(e,1)),["stop","prevent"])),onTouchend:a[7]||(a[7]=e=>ee(e)),onTouchcancel:a[8]||(a[8]=e=>ee(e)),onMousedown:a[9]||(a[9]=e=>ae(e,1))},{default:r((()=>[b(e.$slots,"end-thumb",{value:le.value[1]},(()=>[c(l,{class:v(m(Y).e("thumb")),style:d(ue.value)},null,8,["class","style"])]),!0),e.showValue?(u(),i(l,{key:0,class:v(ie.value),style:d(re.value)},{default:r((()=>[f(g(le.value[1]),1)])),_:1},8,["class","style"])):w("",!0)])),_:3},8,["class"])])),_:3},8,["class","style"]),e.showScale?(u(!0),x(k,{key:0},C(se.value,((e,a)=>(u(),i(l,{key:a,class:v(m(y)(m(Y).e("scale"),m(Y).em("scale","active",e.active))),style:d(m(h)(e.style))},{default:r((()=>[c(l,{class:v(m(Y).e("scale-text"))},{default:r((()=>[f(g(e.value),1)])),_:2},1032,["class"])])),_:2},1032,["class","style"])))),128)):w("",!0)])),_:3},8,["class","id","style"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-2bf02597"]]);export{X as _};

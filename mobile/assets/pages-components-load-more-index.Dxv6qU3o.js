import{_ as e}from"./index.BI3vtXtd.js";import{d as a,G as l,U as o,p as t,o as s,f as r,w as n,v as u,i,t as d,u as m,e as p,s as c,h as v,x as f,q as _,z as x,l as g,g as h,r as y,a as T,c as b,b as j,F as k,I as R,N as w,W as C}from"./index-DFwJ2Oj-.js";import{a as S,_ as I}from"./index.NOUmFN7R.js";import{b as M,_ as $}from"./index.BDMDFAO9.js";import{_ as L,a as V}from"./radio-group.H3c3BP4a.js";import{_ as U,a as W}from"./list.BRtuGdlc.js";import{_ as q}from"./pull-down-refresh.B-luypgj.js";import"./common.BM3Qp-Uy.js";import"./dom.LPfVLj9J.js";const z=$(a({options:{virtualHost:!0,styleIsolation:"shared"},__name:"load-more",props:l({rootStyle:{},rootClass:{},status:{},incompleteText:{},loadingText:{},completeText:{},errorText:{}},{status:"incomplete"}),emits:["load-more","reload"],setup(e,{emit:a}){const l=e,h=a,y=M("load-more"),{t:T}=o("loadMore"),b=()=>{"incomplete"===l.status?h("load-more"):"error"===l.status&&h("reload")},j=t((()=>_(y.b(),y.m(l.status),l.rootClass))),k=t((()=>x(l.rootStyle)));return(e,a)=>{const l=g;return s(),r(l,{class:v(j.value),style:f(k.value),onClick:b},{default:n((()=>["incomplete"===e.status?u(e.$slots,"incomplete",{key:0},(()=>[i(d(e.incompleteText||m(T)("incompleteText")),1)]),!0):"loading"===e.status?u(e.$slots,"loading",{key:1},(()=>[p(S,null,{default:n((()=>[i(d(e.loadingText||m(T)("loadingText")),1)])),_:1})]),!0):"complete"===e.status?u(e.$slots,"complete",{key:2},(()=>[i(d(e.completeText||m(T)("completeText")),1)]),!0):"error"===e.status?u(e.$slots,"error",{key:3},(()=>[i(d(e.errorText||m(T)("errorText")),1)]),!0):c("",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-6ff6289a"]]),A=a({__name:"Basic",setup(e){const a=h("incomplete"),l=["incomplete","loading","complete","error"];return(e,o)=>{const t=y(T("sar-load-more"),z),u=y(T("sar-radio"),L),i=y(T("sar-list-item"),U),d=y(T("sar-list"),W),c=y(T("sar-radio-group"),V),v=g;return s(),r(v,null,{default:n((()=>[p(t,{status:a.value,onLoadMore:o[0]||(o[0]=e=>m(R)("加载更多")),onReload:o[1]||(o[1]=e=>m(R)("重新加载"))},null,8,["status"]),p(c,{modelValue:a.value,"onUpdate:modelValue":o[2]||(o[2]=e=>a.value=e),"root-style":"margin-top: 40rpx"},{custom:n((({toggle:e})=>[p(d,{card:""},{default:n((()=>[(s(),b(k,null,j(l,((a,l)=>p(i,{key:l,title:a,hover:"",onClick:l=>e(a)},{icon:n((()=>[p(u,{readonly:"",value:a},null,8,["value"])])),_:2},1032,["title","onClick"]))),64))])),_:2},1024)])),_:1},8,["modelValue"])])),_:1})}}}),B=a({__name:"WithRefresh",setup(e){const a=h(1),l=h([]),o=e=>new Promise(((a,l)=>{setTimeout((()=>{Math.random()<.55?a({page:e,total:3,list:e>3?[]:Array(4).fill(0).map(((a,l)=>l+1+4*(e-1)))}):l()}),1e3)})),t=h(!1),u=h(),m=e=>{var a;null==(a=u.value)||a.enableToRefresh(0===e.detail.scrollTop)},c=()=>{var e;null==(e=u.value)||e.enableToRefresh(!0)},v=()=>{t.value=!0,o(1).then((e=>{a.value=1,l.value=e.list,f.value=e.page<e.total?"incomplete":"complete",R("刷新成功")})).catch((()=>{R("刷新失败")})).finally((()=>{t.value=!1}))},f=h("incomplete"),_=e=>{f.value="loading",o(e).then((e=>{l.value=[...l.value,...e.list],f.value=e.page<e.total?"incomplete":"complete"})).catch((()=>{f.value="error"}))},x=()=>{t.value||_(++a.value)},S=()=>{t.value||_(a.value)},I=()=>{t.value||"incomplete"!==f.value||_(++a.value)};return w((()=>{_(a.value)})),(e,a)=>{const o=g,_=y(T("sar-load-more"),z),h=y(T("sar-pull-down-refresh"),q),R=C;return s(),r(o,null,{default:n((()=>[p(R,{"scroll-y":"",style:{height:"300px",margin:"20rpx 0",border:"1px solid var(--sar-border-color)"},throttle:!1,onScroll:m,onScrolltoupper:c,onScrolltolower:I},{default:n((()=>[p(h,{loading:t.value,ref_key:"pullDownRefresh",ref:u,onRefresh:v,disabled:"loading"===f.value},{default:n((()=>[(s(!0),b(k,null,j(l.value,(e=>(s(),r(o,{key:e,style:{display:"flex","justify-content":"center","align-items":"center",margin:"10rpx 32rpx",height:"40px",border:"1px solid var(--sar-border-color)"}},{default:n((()=>[i(d(e),1)])),_:2},1024)))),128)),p(_,{status:f.value,onLoadMore:x,onReload:S},null,8,["status"])])),_:1},8,["loading","disabled"])])),_:1})])),_:1})}}}),D=$(a({__name:"index",setup:a=>(a,l)=>{const o=y(T("doc-demo"),e),t=y(T("doc-page"),I);return s(),r(t,null,{default:n((()=>[p(o,{title:"基础使用"},{default:n((()=>[p(A)])),_:1}),p(o,{title:"配合下拉刷新一起使用"},{default:n((()=>[p(B)])),_:1})])),_:1})}}),[["__scopeId","data-v-96b875d4"]]);export{D as default};

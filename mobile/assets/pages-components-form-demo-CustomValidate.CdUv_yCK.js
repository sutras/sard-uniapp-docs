import{S as e}from"./input.2uLEz9Cx.js";import{d as a,g as s,C as t,r,a as l,o,f as u,w as i,e as n,s as m,i as d,I as p}from"./index-DFwJ2Oj-.js";import{_ as c,a as f}from"./form.D0wWYwqT.js";import{a as g,_ as h}from"./index.NOUmFN7R.js";import{_}from"./button.6NBmS2yV.js";import"./index.BDMDFAO9.js";import"./common.BM3Qp-Uy.js";import"./dom.LPfVLj9J.js";const v=a({__name:"CustomValidate",setup(a){const v=s(),b=t({pass:"",checkPass:"",age:""}),P=t({pass:[{validator:e=>{if(""===e)return"Please input the password";if(""!==b.checkPass){if(!v.value)return!0;v.value.validate(["checkPass"]).catch((()=>{}))}return!0},trigger:"blur"}],checkPass:[{validator:e=>""===e?"Please input the password again":e===b.pass||"Two inputs don't match!",trigger:"blur"}],age:[{validator:e=>new Promise(((a,s)=>{if(!e)return s("Please input the age");setTimeout((()=>{Number.isInteger(Number(e))?e<18?s("Age must be greater than 18"):a():s("Please input digits")}),1e3)})),trigger:"blur"}]});return(a,s)=>{const t=r(l("sar-input"),e),k=r(l("sar-form-item"),c),V=r(l("sar-loading"),g),j=r(l("sar-button"),_),w=r(l("sar-form"),f),y=r(l("doc-page"),h);return o(),u(y,null,{default:i((()=>[n(w,{ref_key:"ruleFormRef",ref:v,model:b,rules:P},{default:i((()=>[n(k,{label:"Password",name:"pass"},{default:i((()=>[n(t,{modelValue:b.pass,"onUpdate:modelValue":s[0]||(s[0]=e=>b.pass=e),type:"password"},null,8,["modelValue"])])),_:1}),n(k,{label:"Confirm",name:"checkPass"},{default:i((()=>[n(t,{modelValue:b.checkPass,"onUpdate:modelValue":s[1]||(s[1]=e=>b.checkPass=e),type:"password"},null,8,["modelValue"])])),_:1}),n(k,{label:"Age",name:"age"},{validate:i((({state:e})=>[n(t,{modelValue:b.age,"onUpdate:modelValue":s[2]||(s[2]=e=>b.age=e)},{append:i((()=>["validating"===e?(o(),u(V,{key:0,color:"var(--sar-tertiary-color)"})):m("",!0)])),_:2},1032,["modelValue"])])),_:1}),n(k,null,{default:i((()=>[n(j,{onClick:s[3]||(s[3]=e=>{var a;(a=v.value)&&a.validate().then((()=>{p("Success!"),console.log("Success!")})).catch((()=>{console.log("error submit!")}))})},{default:i((()=>[d("Submit")])),_:1}),n(j,{type:"outline","root-style":"margin-top: 20rpx",onClick:s[4]||(s[4]=e=>{var a;(a=v.value)&&a.reset()})},{default:i((()=>[d(" Reset ")])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1})}}});export{v as default};

import{_ as t}from"./index.e7de6d2c.js";import{L as e,K as o,d as l,J as n,m as i,p as s,q as a,s as r,o as c,f as u,w as d,x as p,h as f,u as m,y as _,l as v,ao as h,U as b,v as x,e as w,i as g,t as y,c as k,F as C,b as S,g as I,C as j,A as H,Z as $,B as G,G as B,r as z,a as F}from"./index-55845ce0.js";import{c as W,e as E,O as R,_ as A}from"./index.f5b2fbd4.js";import{_ as O}from"./button.810661ff.js";import{g as L}from"./dom.7fe67c3f.js";import{_ as M,a as T}from"./index.f4d2668a.js";import{_ as U}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as D,a as P}from"./grid.357b028b.js";import{_ as q,a as J}from"./list.0cde8376.js";import"./common.bcce75e7.js";function K(t){const l=o();let n,i;function s(){if(i){const t=i;return i=void 0,t()}if(t)return L(t,l)}e((()=>{null==n||n.register({getRect:s})}));return{show:e=>{i=e,(t||i)&&(null==n||n.show())},_inject:function(t){n=t}}}const V=Symbol("popover-context"),Z=l({options:{virtualHost:!0,styleIsolation:"shared"},__name:"popover-reference",props:{rootStyle:null,rootClass:null},emits:["click"],setup(t,{emit:l}){const h=t,b=n(),x=o(),w=i(V),g=()=>L(`#${b}`,x);e((()=>{null==w||w.register({getRect:g})}));const y=t=>{null==w||w.show(),l("click",t)},k=s((()=>a(h.rootClass))),C=s((()=>r(h.rootStyle)));return(t,e)=>{const o=v;return c(),u(o,{class:f(m(k)),style:_(m(C)),id:m(b),onClick:y},{default:d((()=>[p(t.$slots,"default")])),_:3},8,["class","style","id"])}}}),N=["top","right","bottom","left"];function Q(t){const e=N.indexOf(t);return N[e+2]??N[e-2]}function X(t){return"top"===t?"height":"width"}const Y={rootStyle:[String,Object,Array],rootClass:String,options:{type:Array,default:()=>[]},direction:String,theme:String},tt=U(l({options:{virtualHost:!0,styleIsolation:"shared"},__name:"menu-item",props:{text:String,disabled:Boolean,icon:String,iconFamily:String,withIcon:Boolean,direction:String},emits:["click"],setup(t,{emit:e}){const o=t,l=T("menu"),n=t=>{e("click",t)},i=s((()=>a(l.e("item"),l.em("item","disabled",o.disabled))));return(t,e)=>{const o=v;return c(),u(o,{class:f(m(i)),onClick:n},{default:d((()=>[t.icon||t.withIcon&&"vertical"===t.direction?(c(),u(o,{key:0,class:f(m(l).e("icon"))},{default:d((()=>[t.icon?(c(),u(M,{key:0,name:t.icon,family:t.iconFamily},null,8,["name","family"])):x("",!0)])),_:1},8,["class"])):x("",!0),w(o,{class:f(m(l).e("text"))},{default:d((()=>[g(y(t.text),1)])),_:1},8,["class"])])),_:1},8,["class"])}}}),[["__scopeId","data-v-48bfa086"]]),et=U(l({options:{virtualHost:!0,styleIsolation:"shared"},__name:"menu",props:Y,emits:["select"],setup(t,{emit:e}){const o=t,l=T("menu"),n=s((()=>o.options.some((t=>!!t.icon)))),i=s((()=>a(l.b(),l.m(o.direction),l.m(o.theme),l.m("with-icon",n.value),o.rootClass))),p=s((()=>r(o.rootStyle)));return(t,o)=>{const l=v;return c(),u(l,{class:f(m(i)),style:_(m(p))},{default:d((()=>[(c(!0),k(C,null,S(t.options,((o,l)=>(c(),u(tt,{key:l,text:o.text,icon:o.icon,"icon-family":o.iconFamily,disabled:o.disabled,"with-icon":m(n),direction:t.direction,onClick:t=>(t=>{t.disabled||e("select",t)})(o)},null,8,["text","icon","icon-family","disabled","with-icon","direction","onClick"])))),128))])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-bdee6379"]]),ot=U(l({options:{virtualHost:!0,styleIsolation:"shared"},__name:"popover",props:{rootStyle:null,rootClass:null,visible:{type:Boolean},options:null,position:{default:"bottom"},direction:{default:"vertical"},theme:{default:"light"},refGap:{default:10},viewportGap:{default:10},transparent:{type:Boolean,default:!0},controller:null},emits:["update:visible","select"],setup(t,{emit:e}){const l=t,i=T("popover"),g=I(l.visible),y=I(!1),S=o(),B=n(),z=I({top:"0",left:"0"}),F=I({top:"0",left:"0"}),A=async()=>{const[t,e]=await Promise.all([K(),L(`#${B}`,S)]);if(t){const[o,n]=function(t,e,{refGap:o,position:l,viewportGap:n,arrowSize:i}){const s=e.width+o,a=e.height+o,r=h(),c=r.windowWidth,u=r.windowHeight,d={top:t.top-a-n,right:c-t.right-s-n,bottom:u-t.bottom-a-n,left:t.left-s-n};let[p,f]=l.split("-");d[p]<0&&(p=Q(p),d[p]<0&&(p=Q(p))),f=f||"center";const m=function(t){return["top","bottom"].includes(t)?"left":"top"}(p),_=function(t){return"top"===t?"left":"top"}(m),v=X(m),x=X(_),w="top"===m?u:c,g="top"===m?c:u,y={top:0,left:0};y[_]=function(){const l={top:()=>t.top-o-e.height,right:()=>t.right+o,bottom:()=>t.bottom+o,left:()=>t.left-o-e.width}[p]();return b(l,n,g-e[x]-n)}(),y[m]=function(){const o={start:()=>t[m],center:()=>t[m]-(e[v]-t[v])/2,end:()=>t[m]-(e[v]-t[v])}[f]();return b(o,n,w-e[v]-n)}();const k={top:y.top,left:y.left,bottom:y.top+e.height,right:y.left+e.width},C={top:0,left:0};return C[m]=function(){const o=Q(m);let l=t[m]-k[m];l<0&&(l=0);const n=Math.min(t[o],k[o])-Math.max(t[m],k[m]);return b(l+n/2,i,e[v]-i)}(),C[_]=function(t,e){return{top:()=>e.height,right:()=>0,bottom:()=>0,left:()=>e.width}[t]()}(p,e),[y,C]}(t,e,{position:l.position,refGap:l.refGap,viewportGap:l.viewportGap,arrowSize:15});z.value={top:`calc(${o.top}px + var(--window-top))`,left:o.left+"px"},F.value={top:n.top+"px",left:n.left+"px"},y.value=!0}},{realVisible:O,transitionClass:M,onTransitionEnd:U}=W(j({visible:y,duration:300,prefix:i.m("")}));H((()=>l.visible),(()=>{g.value=l.visible})),H(g,(()=>{g.value?$((()=>{A()})):y.value=!1}));const D=()=>{g.value=!1,e("update:visible",!1)},P=t=>{g.value=!1,e("select",t),e("update:visible",!1)};let q;const J={show(){g.value=!0,e("update:visible",!0)},register(t){q=t}};G(V,J),H((()=>l.controller),(()=>{l.controller&&l.controller._inject(J)}),{immediate:!0});const K=()=>{if(q)return q.getRect()},[Z,N]=E();H(g,(()=>{g.value&&N()}));const Y=s((()=>a(i.b(),i.m(l.theme),M.value,l.rootClass))),tt=s((()=>r({zIndex:Z.value,transformOrigin:`${F.value.left} ${F.value.top}`,opacity:O.value?1:0},z.value,l.rootStyle)));return(e,o)=>{const l=v;return c(),k(C,null,[p(e.$slots,"default",{},void 0,!0),w(R,{visible:g.value,"z-index":m(Z),transparent:t.transparent,onClick:D},null,8,["visible","z-index","transparent"]),g.value||m(O)?(c(),u(l,{key:0,class:f(m(Y)),style:_(m(tt)),onAnimationend:m(U)},{default:d((()=>[w(l,{class:f(m(i).e("content")),id:m(B)},{default:d((()=>[p(e.$slots,"content",{},(()=>[w(et,{options:t.options,direction:t.direction,theme:t.theme,onSelect:P},null,8,["options","direction","theme"])]),!0)])),_:3},8,["class","id"]),w(l,{class:f(m(i).e("arrow")),style:_(m(r)(F.value))},null,8,["class","style"])])),_:3},8,["class","style","onAnimationend"])):x("",!0)],64)}}}),[["__scopeId","data-v-cbe4a067"]]),lt=l({__name:"Basic",setup(t){const e=[{text:"选项1"},{text:"选项2"},{text:"选项3"}],o=t=>{B(t.text)};return(t,l)=>{const n=z(F("sar-button"),O),i=z(F("sar-popover-reference"),Z),s=z(F("sar-popover"),ot);return c(),u(s,{options:e,onSelect:o},{default:d((()=>[w(i,null,{default:d((()=>[w(n,null,{default:d((()=>[g("显示气泡弹出框")])),_:1})])),_:1})])),_:1})}}}),nt=l({__name:"Dark",setup(t){const e=[{text:"选项1"},{text:"选项2"},{text:"选项3"}],o=t=>{B(t.text)};return(t,l)=>{const n=z(F("sar-button"),O),i=z(F("sar-popover-reference"),Z),s=z(F("sar-popover"),ot);return c(),u(s,{theme:"dark",options:e,onSelect:o},{default:d((()=>[w(i,null,{default:d((()=>[w(n,null,{default:d((()=>[g("显示气泡弹出框")])),_:1})])),_:1})])),_:1})}}}),it=l({__name:"Icon",setup(t){const e=[{text:"选项1",icon:"upc-scan",iconFamily:"demo-icons"},{text:"选项2",icon:"camera",iconFamily:"demo-icons"},{text:"选项3"}],o=t=>{B(t.text)};return(t,l)=>{const n=z(F("sar-button"),O),i=z(F("sar-popover-reference"),Z),s=z(F("sar-popover"),ot);return c(),u(s,{theme:"dark",options:e,onSelect:o},{default:d((()=>[w(i,null,{default:d((()=>[w(n,null,{default:d((()=>[g("显示气泡弹出框")])),_:1})])),_:1})])),_:1})}}}),st=l({__name:"Disabled",setup(t){const e=[{text:"选项1",disabled:!0},{text:"选项2",disabled:!0},{text:"选项3"}],o=t=>{B(t.text)};return(t,l)=>{const n=z(F("sar-button"),O),i=z(F("sar-popover-reference"),Z),s=z(F("sar-popover"),ot);return c(),u(s,{options:e,onSelect:o},{default:d((()=>[w(i,null,{default:d((()=>[w(n,null,{default:d((()=>[g("显示气泡弹出框")])),_:1})])),_:1})])),_:1})}}}),at=l({__name:"Horizontal",setup(t){const e=[{text:"选项1",icon:"upc-scan",iconFamily:"demo-icons"},{text:"选项2"},{text:"选项3"}],o=t=>{B(t.text)};return(t,l)=>{const n=z(F("sar-button"),O),i=z(F("sar-popover-reference"),Z),s=z(F("sar-popover"),ot);return c(),u(s,{direction:"horizontal",options:e,onSelect:o},{default:d((()=>[w(i,null,{default:d((()=>[w(n,null,{default:d((()=>[g("显示气泡弹出框")])),_:1})])),_:1})])),_:1})}}}),rt=l({__name:"Content",setup(t){const e=I(!1);return(t,o)=>{const l=z(F("sar-button"),O),n=z(F("sar-popover-reference"),Z),i=z(F("sar-grid-item"),D),s=z(F("sar-grid"),P),a=z(F("sar-popover"),ot);return c(),u(a,{visible:e.value,"onUpdate:visible":o[0]||(o[0]=t=>e.value=t)},{content:d((()=>[w(s,{clickable:"","root-style":"width: 560rpx"},{default:d((()=>[(c(),k(C,null,S(8,(t=>w(i,{key:t,text:`选项${t}`,icon:"image",onClick:o=>(t=>{B(`选项${t}`),e.value=!1})(t)},null,8,["text","onClick"]))),64))])),_:1})])),default:d((()=>[w(n,null,{default:d((()=>[w(l,null,{default:d((()=>[g("显示气泡弹出框")])),_:1})])),_:1})])),_:1},8,["visible"])}}}),ct=U(l({__name:"CustomReference",setup(t){const e=K("#refId"),o=[{text:"选项1"},{text:"选项2"},{text:"选项3"}],l=t=>{B(t.text)},n=()=>{e.show()};return(t,i)=>{const s=z(F("sar-popover"),ot),a=v;return c(),k(C,null,[w(s,{options:o,onSelect:l,controller:m(e),position:"right"},null,8,["controller"]),w(a,{onClick:n,class:"popover-box",id:"refId"},{default:d((()=>[g("box")])),_:1})],64)}}}),[["__scopeId","data-v-f1d9503c"]]),ut=U(l({__name:"Position",setup(t){const e=I("bottom"),o=I(!1),l=[{text:"选项1"},{text:"选项2"},{text:"选项3"}],n=t=>{e.value=t,o.value=!0},i=t=>{B(t.text)};return(t,s)=>{const a=z(F("sar-grid-item"),D),r=z(F("sar-grid"),P),u=v,p=z(F("sar-popover-reference"),Z),f=z(F("sar-popover"),ot);return c(),k(C,null,[w(u,{style:{margin:"0 120rpx"}},{default:d((()=>[w(r,{columns:3,clickable:""},{default:d((()=>[w(a,{onClick:s[0]||(s[0]=t=>n("top-start"))},{default:d((()=>[g("TS")])),_:1}),w(a,{onClick:s[1]||(s[1]=t=>n("top"))},{default:d((()=>[g("top")])),_:1}),w(a,{onClick:s[2]||(s[2]=t=>n("top-end"))},{default:d((()=>[g("TE")])),_:1})])),_:1})])),_:1}),w(u,{style:{display:"flex","flex-direction":"row","justify-content":"space-between"}},{default:d((()=>[w(r,{columns:1,clickable:"","root-style":"width: 120rpx"},{default:d((()=>[w(a,{onClick:s[3]||(s[3]=t=>n("left-start"))},{default:d((()=>[g("LS")])),_:1}),w(a,{onClick:s[4]||(s[4]=t=>n("left"))},{default:d((()=>[g("left")])),_:1}),w(a,{onClick:s[5]||(s[5]=t=>n("left-end"))},{default:d((()=>[g("LE")])),_:1})])),_:1}),w(f,{options:l,visible:o.value,"onUpdate:visible":s[6]||(s[6]=t=>o.value=t),position:e.value,onSelect:i},{default:d((()=>[w(p,{"root-style":{display:"flex",justifyContent:"center",alignItems:"center",width:"200rpx",height:"200rpx",margin:"auto",background:"var(--sar-orange)"}},{default:d((()=>[g(" box ")])),_:1},8,["root-style"])])),_:1},8,["visible","position"]),w(r,{columns:1,clickable:"","root-style":"width: 120rpx"},{default:d((()=>[w(a,{onClick:s[7]||(s[7]=t=>n("right-start"))},{default:d((()=>[g("RS")])),_:1}),w(a,{onClick:s[8]||(s[8]=t=>n("right"))},{default:d((()=>[g("right")])),_:1}),w(a,{onClick:s[9]||(s[9]=t=>n("right-end"))},{default:d((()=>[g("RE")])),_:1})])),_:1})])),_:1}),w(u,{style:{margin:"0 120rpx"}},{default:d((()=>[w(r,{columns:3,clickable:""},{default:d((()=>[w(a,{onClick:s[10]||(s[10]=t=>n("bottom-start"))},{default:d((()=>[g("BS")])),_:1}),w(a,{onClick:s[11]||(s[11]=t=>n("bottom"))},{default:d((()=>[g("bottom")])),_:1}),w(a,{onClick:s[12]||(s[12]=t=>n("bottom-end"))},{default:d((()=>[g("BE")])),_:1})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-c7d2632c"]]),dt=l({__name:"Manual",setup(t){const e=I("bottom"),o=K(),l=()=>{e.value="bottom",o.show((()=>{const t=h();return{width:t.windowWidth,height:10,left:0,right:t.windowWidth,top:t.windowHeight-10,bottom:t.windowHeight}}))},n=()=>{e.value="bottom-end",o.show((()=>{const t=h();return{width:10,height:10,left:t.windowWidth-10,right:t.windowWidth,top:t.windowHeight-10,bottom:t.windowHeight}}))},i=()=>{e.value="top",o.show((()=>{const t=h();return{width:t.windowWidth,height:10,left:0,right:t.windowWidth,top:0,bottom:10}}))},s=[{text:"选项1"},{text:"选项2"},{text:"选项3"}],a=t=>{B(t.text)};return(t,r)=>{const u=z(F("sar-popover"),ot),p=z(F("sar-list-item"),q),f=z(F("sar-list"),J);return c(),k(C,null,[w(u,{options:s,onSelect:a,position:e.value,controller:m(o)},null,8,["position","controller"]),w(f,{card:""},{default:d((()=>[w(p,{arrow:"",hover:"",title:"屏幕中下",onClick:l}),w(p,{arrow:"",hover:"",title:"屏幕右下",onClick:n}),w(p,{arrow:"",hover:"",title:"屏幕中上",onClick:i})])),_:1})],64)}}}),pt=U(l({__name:"index",setup:e=>(e,o)=>{const l=z(F("doc-demo"),t),n=z(F("doc-page"),A);return c(),u(n,null,{default:d((()=>[w(l,{title:"基础使用"},{default:d((()=>[w(lt)])),_:1}),w(l,{title:"暗黑模式"},{default:d((()=>[w(nt)])),_:1}),w(l,{title:"展示图标"},{default:d((()=>[w(it)])),_:1}),w(l,{title:"禁用选项"},{default:d((()=>[w(st)])),_:1}),w(l,{title:"水平排列"},{default:d((()=>[w(at)])),_:1}),w(l,{title:"自定义内容"},{default:d((()=>[w(rt)])),_:1}),w(l,{title:"弹出位置"},{default:d((()=>[w(ut)])),_:1}),w(l,{title:"自定义reference"},{default:d((()=>[w(ct)])),_:1}),w(l,{title:"手动定义位置"},{default:d((()=>[w(dt)])),_:1})])),_:1})}}),[["__scopeId","data-v-1c33c2c5"]]);export{pt as default};
